{"version":3,"sources":["webpack:///static/js/8.05d1cb7c42fe8068275e.js","webpack:///./src/components/static/TargetSetting.vue","webpack:///./src/components/static/TargetDialog.vue","webpack:///./src/components/static/TargetSetting.vue?b614","webpack:///./src/components/static/TargetSetting.vue?1ff8","webpack:///src/components/static/TargetSetting.vue","webpack:///./src/components/static/TargetDialog.vue?d8b3","webpack:///./src/components/static/TargetDialog.vue?6dec","webpack:///src/components/static/TargetDialog.vue","webpack:///./src/components/dynamic/HistoryGrid.vue","webpack:///./src/components/dynamic/HistoryGrid.vue?c4c1","webpack:///./src/components/dynamic/HistoryGrid.vue?6578","webpack:///src/components/dynamic/HistoryGrid.vue","webpack:///./src/components/dynamic/HistoryGrid.vue?f661","webpack:///./src/components/static/TargetDialog.vue?9fa6","webpack:///./src/components/static/TargetSetting.vue?8d0e"],"names":["webpackJsonp","879","module","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetSetting_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4695fe4e_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetSetting_vue__","normalizeComponent","__vue_styles__","Component","919","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetDialog_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4ccba1ba_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetDialog_vue__","928","exports","content","i","locals","929","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","930","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_element_tree_grid_src_index_js__","__WEBPACK_IMPORTED_MODULE_2_element_tree_grid__","__WEBPACK_IMPORTED_MODULE_2_element_tree_grid___default","n","__WEBPACK_IMPORTED_MODULE_3__components_static_TargetDialog__","use","props","components","ElTreeGrid","a","ElTableTreeColumn","data","dtSrc","userWithAvatarLst","editableUser","methods","loadAvatar","avatar","undefined","replace","this","$appUri","BaseURL","openTargetDetail","row","dataToPass","item","workers","workerLst","isEditable","targetLst","departmentLst","disabled","targetFields","JSON","parse","targetFieldLst","getTargets","getObject","targetSavedLst","$hub","$emit","addNewTarget","constructor","Array","departments","rootId","watch","val","$Utils","treeify","options","key","parentKey","created","rotateDementionArr","targetsObj","typeLst","user","$getItemLocalStorage","$localStorageConstant","LoggedOnUser","$isSystemAdmin","$isMantisAdmin","GroupRoles","Leader","indexOf","Project","GroupId","Director","931","932","933","$","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","__WEBPACK_IMPORTED_MODULE_1__components_dynamic_HistoryGrid__","HistoryGrid","_this","isLeader","ruleForm","Name","$Lodash","cloneDeep","Assigned","equals","split","filter","autoCal","oldName","IsPublic","Value","TargetType","ActualStartDate","ActualFinishDate","ParentId","Owner","Plan","Done","Unit","Progress","isShowAllTarget","oldObject","Id","dataCopied","viewHistoryModel","rules","required","message","trigger","submitForm","formName","ctrl","$refs","validate","valid","console","log","checkExits","tmp","Math","round","Number","isNaN","resetForm","resetFields","close","deleteTarget","_this2","$confirm","confirmButtonText","cancelButtonText","type","then","recursiveDeleteTarget","Level","tRequest","clone","$singleRequest","R1_RequestTemplate","R1_RequestDataGroup","R1_RequestFields","eval","model","post","response","getDataWithRoot","R1","updateRequest","each","index","fVal","Targets","TargetsName","RequestTemplate","RequestDataGroup","RequestFields","TotalRequests","updateParamsSingleRequest","catch","isEmpty","request","R1_Id","dData","loadHistory","id","RequestAction","RequestClass","R1_Code","R1_SourceId","arrShowField","field","History","result","success","logData","k","logChanges","Changes","change","length","ColumnName","date","stringToDate","OldDisplayValue","Version","formatDateTime","NewDisplayValue","forEach","object","checkField","DynamicText","ex","R1_Name","R1_ParentId","Parent","listExitsTar","el","$message","error","saveOrUpdate","R1_ReferenceId","R1_NestedSetType","R1_Plan","R1_Done","R1_Owner","R1_TargetType","parseFloat","R1_Progress","R1_Unit","R1_IsPublic","R1_Value","res","R1_ValueName","GroupName","R1_Assigned","R1_AssignedName","UserId","Username","R1_OwnerName","R1_ActualStartDate","R1_ActualFinishDate","objectReturn","Data","autoCals","AssignedName","OwnerName","arrChanged","compareChange","createHistoryLogs","target","saveOrUpdatePermissions","objReturn","objOld","objTemp","valueReturn","caption","values","Caption","obj","key1","changedObject","ColumnCaption","OldValue","NewValue","FieldColumnType","getTime","countHistory","SourceId","Code","insertRequest","parseInt","CreatedByName","getUserInfo","insertResult","isUpdate","paramsSearchLinked","ConditionFields","StaticFields","OrderFields","TotalCount","arrLink","DataDS","Linked","removeLinks","link","savePermission","linkToRoleEveryone","permissons","leaders","groups","req","gro","ix","data1","ele","concat","strLeaders","GroupParent","p","Parrent","Child","ChildTable","p1","p10","$administrator","p11","$supervisor","persReadyToInsert","data3","data2","changeEditState","changeType","$set","setParent","parent","group","v","Permission","LoginName","call","934","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_HistoryGrid_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_73377d6a_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_HistoryGrid_vue__","935","936","937","938","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","staticStyle","width","_l","h","_s","itemLog","style","background-color","colspan","Created","_e","staticRenderFns","esExports","939","float","padding","icon","on","click","$event","ref","label-position","$isMobileDevice","label-width","label","prop","callback","$$v","expression","display","active-color","inactive-color","active-text","inactive-text","format","placeholder","t","size","border","ng-show","effect","placement","filterable","clearable","multiple","dtSource","dtHeader","940","flex","align-items","justify-content","font-size","padding-right","empty-text","scopedSlots","_u","fn","scope","text-align","cursor","levelKey","treeKey","show-overflow-tooltip","text-inside","stroke-width","percentage","margin","height","title","src","Avatar"],"mappings":"AAAAA,cAAc,IAERC,IACA,SAAUC,EAAQC,EAAqBC,GAE7C,YCLA,SAAAC,GAAAC,GACAF,EAAA,KDKAG,OAAOC,eAAeL,EAAqB,cAAgBM,OAAO,GAC7C,IAAIC,GAAyHN,EAAoB,KCPtKO,EAAAP,EAAA,KAGAQ,EAAAR,EAAA,GAQAS,EAAAR,EAKAS,EAAAF,EACAF,EAAA,EACAC,EAAA,GATA,EAWAE,EAPA,KAEA,KAUAV,GAAA,QAAAW,EAAA,SDcMC,IACA,SAAUb,EAAQC,EAAqBC,GAE7C,YE1CA,SAAAC,GAAAC,GACAF,EAAA,KF0CqB,GAAIY,GAAwHZ,EAAoB,KE3CrKa,EAAAb,EAAA,KAGAQ,EAAAR,EAAA,GAQAS,EAAAR,EAKAS,EAAAF,EACAI,EAAA,EACAC,EAAA,GATA,EAWAJ,EAPA,kBAEA,KAUAV,GAAA,EAAAW,EAAA,SFkDMI,IACA,SAAUhB,EAAQiB,EAASf,GGzEjC,GAAAgB,GAAAhB,EAAA,IACA,iBAAAgB,SAAAlB,EAAAmB,EAAAD,EAAA,MACAA,EAAAE,SAAApB,EAAAiB,QAAAC,EAAAE,OAEAlB,GAAA,gBAAAgB,GAAA,IHkFMG,IACA,SAAUrB,EAAQiB,EAASf,GI1FjCe,EAAAjB,EAAAiB,QAAAf,EAAA,SAKAe,EAAAK,MAAAtB,EAAAmB,EAAA,gFAAuG,IAAQI,QAAA,EAAAC,SAAA,iEAAAC,SAAAC,SAAA,kEAAAC,KAAA,oBAAAC,gBAAA,kHAA0UC,WAAA,OJmGnbC,IACA,SAAU9B,EAAQC,EAAqBC,GAE7C,YACqB,IAAI6B,GAAoC7B,EAAoB,GACxD8B,EAA+D9B,EAAoB,KACnF+B,EAAkD/B,EAAoB,KACtEgC,EAA0DhC,EAAoBiC,EAAEF,GAChFG,EAAgElC,EAAoB,IK5D7G6B,GAAA,QAAAM,IAAAnC,EAAA,KACAD,EAAA,GLoEEqC,OAAQ,YAAa,UAAW,UAAW,YAAa,gBAAiB,iBAAkB,aAAc,YAAa,SKlExH,kBLmEEC,YAAcC,WAAYN,EAAwDO,EKlEpFC,kBAAAV,EAAA,GLmEEW,KAAM,WACJ,OACEC,SACAC,qBACAC,cKjEN,ILqEEC,SACEC,WAAY,SAAoBC,GAI9B,WAHcC,IAAVD,IAAqBA,EKnE/B,qCLoEMA,EAASA,EAAOE,QAAQ,cKnE9B,eAEA,sCADAF,EACAG,KAAAC,QAAAC,QACAL,EAAAG,KAAAC,QAAAC,QAAAL,EAAAE,QAAA,QACA,uBLmEII,iBAAkB,SAA0BC,GAC1C,GAAIC,IACFC,KKhERF,ELiEQG,QAASP,KK/DjBQ,ULiEQC,YKhER,ELiEQC,UAAWV,KKhEnBU,ULiEQC,cAAeX,KKhEvBW,cLiEQC,UKhER,ELiEQC,aAAcC,KAAKC,MAAMf,KKhEjCgB,gBLiEQC,WAAYjB,KKhEpBiB,WLiEQC,UAAWlB,KKhEnBkB,ULiEQC,eAAgBnB,KK/DxBmB,eLiEMnB,MAAKoB,KKhEXC,MACA,iBACA,GACA,OACA,EACA,SACArC,EAAA,GACA,EACA,GACAqB,GAEA,GLsDML,KAAKoB,KAAKC,MKrDhB,eLuDIC,aAAc,WACZ,IAAItB,KAAKgB,gBAAkBhB,KAAKgB,eAAeO,aAAeC,MAA9D,CACA,GAAInB,IAAeC,QACjBC,QAASP,KKrDjBQ,ULsDQiB,YAAazB,KKrDrBW,cLsDQF,YKrDR,ELsDQC,UAAWV,KKrDnBU,ULsDQC,cAAeX,KKrDvBW,cLsDQC,UKrDR,ELsDQC,aAAcC,KAAKC,MAAMf,KKrDjCgB,gBLsDQU,OAAQ1B,KKrDhB0B,OLsDQT,WAAYjB,KKrDpBiB,WLsDQC,UAAWlB,KKrDnBkB,ULsDQC,eAAgBnB,KKpDxBmB,eLsDMnB,MAAKoB,KKrDXC,MACA,iBACA,GACA,OACA,EACA,SACArC,EAAA,GACA,EACA,GACAqB,GAEA,GL2CML,KAAKoB,KAAKC,MK1ChB,iBL6CEM,OACEjB,UAAW,SAAmBkB,GAC5B5B,KAAKR,MAAQQ,KAAK6B,OAAOC,QAAQF,EAAK5B,KAAK+B,QAAQC,IAAKhC,KAAK+B,QAAQE,UK1C3E,WL6CEC,QAAS,WACPlC,KAAKP,kBAAoBO,KAAK6B,OAAOM,mBAAmBnC,KAAKQ,UK1CjE,UL2CIR,KAAKoC,WAAapC,KAAK6B,OAAOM,mBAAmBnC,KAAKqC,QK1C1D,ML2CIrC,KAAKR,MAAQQ,KAAK6B,OAAOC,QAAQ9B,KAAKU,UAAWV,KAAK+B,QAAQC,IAAKhC,KAAK+B,QAAQE,UK1CpF,QL2CI,IAAIK,GAAOxB,KAAKC,MAAMf,KAAKuC,qBAAqBvC,KAAKwC,sBK1CzDC,cL2CQzC,MAAK0C,kBAAoB1C,KAAK2C,iBAChC3C,KAAKN,cK1CX,EL2Ce4C,EAAKM,YKzCpBN,EAAAM,WAAAC,QAAAP,EAAAM,WAAAC,OAAAC,QAAAR,EAAAS,QAAAC,UACA,GAAAV,EAAAM,WAAAK,UAAAX,EAAAM,WAAAK,SAAAH,QAAAR,EAAAS,QAAAC,UACA,KLyCQhD,KAAKN,cKvCb,GL0CMM,KAAKN,cKvCX,KL8CMwD,IACA,SAAUtG,EAAQiB,EAASf,GMpMjC,GAAAgB,GAAAhB,EAAA,IACA,iBAAAgB,SAAAlB,EAAAmB,EAAAD,EAAA,MACAA,EAAAE,SAAApB,EAAAiB,QAAAC,EAAAE,OAEAlB,GAAA,gBAAAgB,GAAA,IN6MMqF,IACA,SAAUvG,EAAQiB,EAASf,GOrNjCe,EAAAjB,EAAAiB,QAAAf,EAAA,SAKAe,EAAAK,MAAAtB,EAAAmB,EAAA,6LAAoN,IAAQI,QAAA,EAAAC,SAAA,gEAAAC,SAAAC,SAAA,0DAAAC,KAAA,mBAAAC,gBAAA,iQAA+cC,WAAA,OP8NrqB2E,IACA,SAAUxG,OAAQC,oBAAqBC,qBAE7C,cAC4B,SAASuG,GAAyB,GAAIC,oEAAqExG,oBAAoB,GAClIyG,2EAA6EzG,oBAAoBiC,EAAEuE,oEACnGE,8DAAgE1G,oBAAoB,IQjJ7GD,qBAAA,GRuJEsC,YQnJFsE,YAAAD,8DAAA,GRsJEtE,OQrJF,QRsJEK,KAAM,WQrJR,GAAAmE,GAAA1D,KRwJQsC,EAAOxB,KAAKC,MAAMf,KAAKuC,qBAAqBvC,KAAKwC,sBQvJzDC,eRwJQkB,GAAY3D,KQvJpB2C,mBAAA3C,KACA2C,kBAAAL,EAAAM,YAAAN,EAAAM,WAAAC,QAAAP,EAAAM,WAAAC,OAAAC,QAAAR,EAAAS,QAAAC,UACA,ERsJQY,IA8BJ,YA7B2B9D,IAAvBE,KAAKT,KAAKe,KAAKuD,MACjBD,EAAW5D,KAAK8D,QAAQC,UAAU/D,KAAKT,KQrJ7Ce,URsJqCR,IAA3BE,KAAKT,KAAKe,KAAK0D,UAA0BhE,KAAK6B,OAAOoC,OAAOjE,KAAKT,KAAKe,KAAK0D,SAAU,IAKvFJ,EAASI,YAJTJ,EAASI,SAAWhE,KAAKT,KAAKe,KAAK0D,SAASE,MAAM,KAAKC,OAAO,SAAU7D,GACtE,OAAQoD,EAAM7B,OAAOoC,OAAO3D,EQrJtC,MR0JMsD,EAASQ,SQrJf,ERsJMR,EAASS,QAAUrE,KAAKT,KAAKe,KAAKuD,KQrJxC,GRsJMD,EAASU,SAAiC,MAAtBV,EAASU,WAE7BV,EAASC,KQrJf,GRsJMD,EAASW,MQrJf,GRsJMX,EAASY,WQrJf,GRsJMZ,EAASU,UQrJf,ERsJMV,EAASa,gBQrJf,GRsJMb,EAASc,iBQrJf,GRsJMd,EAASI,YACTJ,EAASe,SQrJf,GRsJMf,EAASgB,MQrJf,GRsJMhB,EAASiB,KQrJf,GRsJMjB,EAASkB,KQrJf,GRsJMlB,EAASmB,KQrJf,GRsJMnB,EAASoB,SQrJf,ERsJMpB,EAASQ,SQrJf,ERsJMR,EAASS,QQrJf,KRwJMY,iBQrJN,ERsJMC,UAAWlF,KAAK8D,QAAQC,UQrJ9BH,GRsJMvB,UACE8C,GQrJR,IRsJQtB,KQrJR,qBRuJQsB,GQrJR,IRsJQtB,KQrJR,uBRuJQsB,GQrJR,IRsJQtB,KQnJR,qBRqJMD,SQpJNA,ERqJMD,SQpJNA,ERqJMyB,WAAYpF,KAAK8D,QAAQC,UAAU/D,KQpJzCT,MRqJM8F,oBACAC,OACEzB,OQpJR0B,UAAA,EAAAC,QAAA,yBAAAC,QAEA,SRmJQlB,QQlJRgB,UAAA,EAAAC,QAAA,+BAAAC,QAEA,WRiJQd,WQhJRY,UAAA,EAAAC,QAAA,kCAAAC,QAIA,cRiJE9D,SACAhC,SACE+F,WAAY,SAAoBC,GAC9B,GAAIC,GQ9IV5F,IR+IMA,MAAK6F,MAAMF,GAAUG,SAAS,SAAUC,GACtC,IAAIA,EAIF,MADAC,SAAQC,IQ9IlB,mBACA,CR2IUL,GQ9IVM,gBRqJI9B,QAAS,WACP,GAA6B,GAAzBpE,KAAK4D,SAASQ,QQ9IxB,CR+IQ,GAAI+B,GAAMC,KAAKC,MAAMC,OAAOtG,KAAK4D,SAASkB,MAAQwB,OAAOtG,KAAK4D,SAASiB,MQ9I/E,IR+IQ7E,MAAK4D,SAASoB,SAAWuB,MAAMJ,GAAOnG,KAAK4D,SAASoB,SQ9I5DmB,IRiJIK,UAAW,SAAmBb,GAC5B3F,KAAK6F,MAAMF,GQ9IjBc,eRgJIC,MAAO,WACL1G,KAAKoB,KAAKC,MQ9IhB,gBRgJIsF,aAAc,QAASA,gBQ9I3B,GAAAC,QAAA5G,KRiJU4F,KQhJV5F,IRiJMA,MAAK6G,SAAS,0CAA2C,YACvDC,kBQhJR,MRiJQC,iBQhJR,SRiJQC,KQhJR,YAHAC,KAAA,WRqJQrB,KAAKsB,uBAAwB/B,GAAMS,KAAKrG,KAAKe,KAAK6E,GAAIgC,MAASvB,KAAKrG,KAAKe,KQhJjF6G,QRiJQvB,KQ/IRc,ORiJQ,IAAIU,UAAWR,OAAO/E,OAAOwF,MAAMT,OQhJ3CU,eRiJQF,UAASG,mBQhJjB,sBRiJQH,SAASI,oBQhJjB,sCRiJQJ,SAASK,iBQhJjB,yBRiJQ,KAAK,GAAI1J,GAAI,EAAGA,GAAK2J,KAAK9B,KAAKrG,KAAKe,KAAK6G,MAAQ,GAAIpJ,IACnDqJ,SAASK,kBAAoB,eAAiB1J,EQhJxD,GRkJQqJ,UAAS,mBAAqBxB,KAAK+B,MAAMR,MAAQ,IAAMvB,KAAK+B,MQhJpExC,GRiJQS,KAAK/D,OAAO+F,KAAKR,UAAUH,KAAK,SAAUY,UACxCA,SAAWjC,KAAK/D,OAAOiG,gBAAgBD,SAASE,GQhJ1D,oBRiJU,IAAIC,eAAgBpC,KAAK9B,QAAQC,UAAU6B,KQhJrD0B,eRiJUjE,GAAE4E,KAAKJ,SAAU,SAAUK,MAAO/K,OAChC,GAAIgL,QACJA,MAAKhD,GAAKS,KAAK9B,QAAQC,UAAU5G,MQhJ7CgI,IRiJYgD,KAAKC,QQhJjB,GRiJYD,KAAKE,YQhJjB,GRiJYF,KAAKG,gBQhJjB,sBRiJYH,KAAKI,iBQhJjB,sCRiJYJ,KAAKK,cQhJjB,0BRiJYnF,EAAE4E,KAAK9K,MAAMiL,QAAQlE,MAAM,KAAM,SAAUlC,IAAKJ,KAC1CI,IAAM0F,KAAK9B,KAAKrG,KAAKe,KAAK6G,MAAQ,KACpCgB,KAAKC,SAAWxG,IQhJhC,IRiJgBuG,KAAK,gBAAkBnG,IAAM,IQhJ7CJ,IRiJgBuG,KAAKK,eAAiB,gBAAkBxG,IAAM,GQhJ9D,ORmJYqB,EAAE4E,KAAK9K,MAAMkL,YAAYnE,MAAM,KAAM,SAAUlC,IAAKJ,KAC9CI,IAAM0F,KAAK9B,KAAKrG,KAAKe,KAAK6G,MAAQ,KACpCgB,KAAKE,aAAezG,IQhJpC,ORmJYoG,cAAcS,cAAgBP,MQhJ1C,ERiJYF,cAAgBpC,KAAK/D,OAAO6G,0BAA0BV,cAAeG,KAAMD,MQhJvF,KRkJUtC,KAAK/D,OAAO+F,KQhJtBI,mBRkJSW,MAAM,eAEXzB,sBAAuB,SAA+B3H,GACpD,GAAIqG,GQ9IV5F,IR+IM,IAAI4F,EAAK/D,OAAO+G,QAAQrJ,GQ9I9B,CR+IQ,GAAIsJ,GAAUjD,EAAK9B,QAAQC,UAAU6B,EQ9I7C0B,eR+IQuB,GAAQtB,mBQ9IhB,iBR+IQsB,EAAQC,MAAQvJ,EQ9IxB4F,GR+IQS,EAAK/D,OAAO+F,KAAKiB,GAAS5B,KAAK,SAAU8B,GACvC1F,EAAE4E,KAAKrC,EAAKrG,KAAKmB,UAAW,SAAUsB,EAAK7E,GACrCoC,EAAK4F,IAAMhI,EAAMwH,UACnBiB,EAAKsB,sBQ9InB/J,KRiJUyI,EAAKrG,KQ9If0B,aR+IU2E,EAAKrG,KQ9If2B,gBRkJI8H,YAAa,SAAqBC,GAChC,GAAIrD,GQ9IV5F,KR+IU6I,GACFK,cQ9IR,UR+IQC,aQ9IR,QR+IQV,cQ9IR,IR+IQlB,mBQ9IR,cR+IQ6B,QQ9IR,iBR+IQC,YQ5IRJ,GR+IUK,IACJA,GAAe1D,EAAKrG,KAAKsB,aAAasD,OAAO,SAAUoF,GACrD,MQ9IR,QR8IeA,EAAMC,UAGf5D,EAAK/D,OAAO+F,KAAKiB,GAAS5B,KAAK,SAAUwC,GACvC,GAAIA,EAAOC,SAAWD,EAAO1B,GAAG2B,QQ9IxC,CR+IU,GAAIC,GAAU/D,EAAK/D,OAAOiG,gBAAgB2B,EQ1IpD,sBR4IUpG,GAAE4E,KAAK0B,EAAS,SAAUC,EAAG3D,GAC3B,IACEL,EAAKP,iBAAiBnH,MAAO8I,KAAM,OAAQ7J,MQ3IzD8I,GR4Ic,IAAI4D,GAAa/I,KAAKC,MAAMkF,EQ3I1C6D,QR4IczG,GAAE4E,KAAK4B,EAAY,SAAUD,EAAGG,GAC9B,GAAIT,EAAaU,OAAS,GAA2B,aAAtBD,EAAOE,YAAmD,OAAtBF,EAAOE,WQ3I1F,CR4IkB,GAA0B,oBAAtBF,EAAOE,YAA0D,qBAAtBF,EAAOE,YAA2D,YAAtBF,EAAOE,WQ3IpH,CR4IoB,GACIC,GAAOtE,EAAK/D,OAAOsI,aAAaJ,EQ3IxDK,gBR4IoBL,GAAOK,gBAAkC,MAAhBnE,EAAIoE,QAAkB,GAAKzE,EAAK/D,OAAOyI,eAAeJ,EQ7InG,cR8IoBA,EAAOtE,EAAK/D,OAAOsI,aAAaJ,EQ3IpDQ,iBR4IoBR,EAAOQ,gBAAkB3E,EAAK/D,OAAOyI,eAAeJ,EQ/IxE,cRiJ4H,IAA/E,iBAAtBH,EAAOE,aAAkCF,EAAOK,iBAA8C,KAA3BL,EAAOQ,kBAC7EjB,EAAakB,QAAQ,SAAUjB,GAC7B,GAAIkB,IAAWzD,KAAM,OAAQ7J,MQ3InD4M,GR4I0BW,MAAkC5K,IAArByJ,EAAMoB,aAAiD,IAArBpB,EAAMoB,YAAoBpB,EAAMoB,YAAcpB,EQ3IvH1F,IR4I0BkG,GAAOE,YAAcS,IACG,eAAtBX,EAAOE,WACTrE,EAAKvD,QAAQ8B,OAAO,SAAU7D,GACxBA,EAAK6E,KAAO4E,EQ3I5CK,kBAAAL,EAAAK,gBAAA,MAAAnE,EAAAoE,QAAA,GAAA/J,EACAuD,MR2IgCvD,EAAK6E,KAAO4E,EQ1I5CQ,kBAAAR,EAAAQ,gBAAAjK,EACAuD,QR2IyD,aAAtBkG,EAAOE,aAChBF,EAAOK,gBAAkC,MAAhBnE,EAAIoE,QAAkB,GAAgC,MAA3BN,EAAOK,iBAAqD,GAA1BL,EAAOK,gBAA2B,WQzIlJ,YR0I0BL,EAAOQ,gBAA6C,MAA3BR,EAAOQ,iBAAqD,GAA1BR,EAAOK,gBAA2B,WQzIvH,aR2IwBxE,EAAKP,iBAAiBnH,KQxI9CuM,SR8Ic,MAAOG,GACP5E,QAAQC,IQxItB2E,UR8II1E,WAAY,WACV,GAAIN,GQxIV5F,KRyIU6I,EAAUjD,EAAK9B,QAAQC,UAAU/D,KQxI3CsH,eRyIMuB,GAAQtB,mBQxId,8BRyIMsB,EAAQpB,iBQxId,iBRyIMoB,EAAQgC,QAAUjF,EAAKhC,SQxI7BC,KRyIMgF,EAAQrB,oBQxId,2BRyIMqB,EAAQiC,YAAclF,EAAKhC,SAASmH,OAASnF,EAAKhC,SAASmH,OAAO5F,GAAKS,EAAKhC,SQxIlFe,SRyIMiB,EAAK/D,OAAO+F,KAAKiB,GAAS5B,KAAK,SAAU1H,GACvC,GAAIyL,GAAepF,EAAK/D,OAAOiG,gBAAgBvI,EAAKwI,GQxI5D,yBRyIQiD,GAAeA,EAAa7G,OAAO,SAAU8G,GAC3C,MAAOA,GAAGpH,MAAQ+B,EAAKhC,SQxIjCS,UR0ImC,GAAvB2G,EAAahB,OACfpE,EAAKsF,SAASC,MQxIxB,sBR0IUvF,EQvIVwF,kBR2IIA,aAAc,WACZ,GAAIxF,GQtIV5F,KRwIU6I,EAAUjD,EAAK9B,QAAQC,UAAU/D,KQvI3CsH,eRwIW1B,GAAKhC,SAASuB,IAKjB0D,EAAQtB,mBQtIhB,8BRuIQsB,EAAQC,MAAQlD,EAAKhC,SQtI7BuB,KRiIQ0D,EAAQtB,mBQvIhB,8BRwIQsB,EAAQwC,eAAiBzF,EAAKhC,SAASe,SAAWiB,EAAKhC,SAASe,SAAWiB,EAAKrG,KQvIxFmC,ORwIQmH,EAAQyC,iBQvIhB,uBR4IMzC,EAAQpB,iBQtId,yORuIMoB,EAAQrB,oBQtId,2BRuIMqB,EAAQgC,QAAUjF,EAAKhC,SQtI7BC,KRuIMgF,EAAQ0C,QAAU3F,EAAKhC,SQtI7BiB,KRuIMgE,EAAQ2C,QAAU5F,EAAKhC,SQtI7BkB,KRuIM+D,EAAQ4C,SAAW7F,EAAKhC,SQtI9BgB,MRuIMiE,EAAQ6C,cAAgB9F,EAAKhC,SQtInCY,WRuIW+B,MAAMoF,WAAW/F,EAAKhC,SAASoB,SAAW,WAGtCY,GAAKhC,SQtIpBoB,SRoIQ6D,EAAQ+C,YAAchG,EAAKhC,SQtInCoB,SR0IM6D,EAAQgD,QAAUjG,EAAKhC,SQtI7BmB,KRuIM8D,EAAQiD,YAAwC,GAA1BlG,EAAKhC,SAASU,SAAmB,EQtI7D,ERuIMuE,EAAQkD,SAAWnG,EAAKhC,SQtI9BW,MRuIMlB,EAAE4E,KAAKrC,EAAKjF,cAAe,SAAUiJ,EAAGhI,GACtC,GAAIoK,GAAMpK,EAAIoB,UAAY4C,EAAKhC,SQtIvCW,KR0IQ,OAHKyH,KACHnD,EAAQoD,aAAerK,EQtIjCsK,WAEAF,IRyIMnD,EAAQsD,YQtId,GRuIMtD,EAAQuD,gBQtId,GRuIM/I,EAAE4E,KAAKrC,EAAKhC,SAASI,SAAU,SAAU4F,EAAGzE,GAC1C0D,EAAQsD,aAAehH,EQtI/B,IRuIQS,EAAKrG,KAAKgB,QAAQ4D,OAAO,SAAU7B,GAC7BA,EAAK+J,QAAU/J,EAAK+J,SAAWlH,IACjC0D,EAAQuD,iBAAmB9J,EAAKgK,SQtI5C,SR0IM1G,EAAKrG,KAAKgB,QAAQ4D,OAAO,SAAU7B,GAC7BA,EAAK+J,QAAU/J,EAAK+J,SAAWzG,EAAKhC,SAASgB,QAC/CiE,EAAQ0D,aAAejK,EQtIjCgK,YRyIU1G,EAAK/D,OAAO+G,QAAQhD,EAAKhC,SQtInCa,mBAAAoE,EAAA2D,mBAAA5G,EAAA/D,OAAAyI,eAAA1E,EAAAhC,SACAa,kBRsIUmB,EAAK/D,OAAO+G,QAAQhD,EAAKhC,SQrInCc,oBAAAmE,EAAA4D,oBAAA7G,EAAA/D,OAAAyI,eAAA1E,EAAAhC,SACAc,mBRqIMkB,EAAK/D,OAAO+F,KAAKiB,GAAS5B,KAAK,SAAU1H,GACvCqG,EAAK8G,aAAe9G,EAAK9B,QAAQC,UAAU6B,EQpInDhC,URqIQgC,EAAK8G,aAAavH,GAAK5F,EAAKwI,GQpIpC4E,KRqIY/G,EAAK/D,OAAO+G,QAAQhD,EAAK8G,aQpIrC,mBAAA9G,GAAA8G,aACAE,SRoIYhH,EAAK/D,OAAO+G,QAAQhD,EAAK8G,aQnIrC,kBAAA9G,GAAA8G,aACArI,QRmIQuB,EAAKrG,KAAKe,KAAOsF,EAAK9B,QAAQC,UAAU6B,EQlIhD8G,cRmIQ9G,EAAK8G,aAAaG,aAAehE,EQlIzCuD,gBRmIQxG,EAAK8G,aAAaI,UAAYjE,EQlItC0D,aRmIQ3G,EAAK8G,aAAa1I,SAAW6E,EQlIrCsD,YRmIQvG,EAAK8G,aAAanI,MAAQsE,EQlIlCkD,QRmIQ,IAAIgB,GAAanH,EAAKoH,cAAcpH,EAAK8G,aAAc9G,EQlI/DV,URmIYU,GAAK/D,OAAO+G,QAAQmE,IAAeA,EAAW/C,OAAS,IACrDnB,EAAQtB,mBACV3B,EAAKqH,kBQlIjBF,GR4IQ,IAAIG,GAAStH,EAAK9B,QAAQC,UAAU6B,EQlI5ChC,SRmIQsJ,GAAO/H,GAAK5F,EAAKwI,GQlIzB4E,KRmIQ/G,EAAKuH,wBAAkD,KAA1BvH,EAAKhC,SAASS,QQlInD6I,GRmIQtH,EQlIRc,WRqIIsG,cAAe,SAAuBI,EAAWC,GAC/C,GAAIzH,GQlIV5F,KRmIU+M,IAuDJ,OAtDAnH,GAAK0H,QAAU1H,EAAK9B,QAAQC,UAAU6B,EQlI5CV,WRmIM7B,EAAE4E,KAAKmF,EAAW,SAAUpL,EAAKJ,GAC/B,GAAIgE,EAAK/D,OAAO+G,QAAQhH,GQlIhC,CRmIU,GAAI2L,GQlId3L,ERmIc4L,EQlId,GRmIcjE,IACJlG,GAAE4E,KAAKrC,EAAKrG,KAAKsB,aAAc,SAAU+I,EAAG6D,GACtCA,EAAO5J,OAAS7B,GAAyB,QAAlByL,EAAOjE,UAChCgE,EAAUC,EQlIxBC,QRmIcnE,EQlIdkE,IRqIU,IAAIE,KAEJtK,GAAE4E,KAAKoF,EAAQ,SAAUO,EAAMzQ,GACzB6E,GAAO4L,GAAkD,GAA1ChI,EAAK/D,OAAOoC,OAAO9G,EAAOoQ,KAC3CI,EAAIC,GQlIlBzQ,IRqIU,IAAI0Q,IACFC,cQlIZN,ERmIYvD,WQlIZjI,ERmIYoI,gBAAiBuD,EQlI7B3L,GRmIY+L,SAAUJ,EQlItB3L,GRmIYuI,gBAAiB6C,EAAUpL,GAAOoL,EAAUpL,GQlIxDuL,ERmIYS,SQjIZT,ERmIU,IAAI3H,EAAK/D,OAAO+G,QAAQW,GACtB,OAAQA,EQlIpB0E,iBRmIc,IQlId,WRmIoBrI,EAAK/D,OAAOsI,aAAavI,GAAKsM,WAAatI,EAAK/D,OAAOsI,aAAa0D,EAAcE,UAAUG,YAC9FL,MQlIlB/N,GAEA,MRmIc,KQlId,SRwIc,IQlId,WRmIqB8F,EAAK/D,OAAO+G,QAAQhD,EAAK0H,QAAQtL,KAAS4D,EAAK/D,OAAO+G,QAAQwE,EAAUpL,MAC3E6L,EAAczD,gBQlIhC,ERmIkByD,EAAcE,SQlIhC,GRwIcF,GAAiBjI,EAAK/D,OAAO+G,QAAQ4E,IAAuB,IAAXA,GACnDT,EAAW7O,KQlIvB2P,MAIAd,GRoIIE,kBAAmB,SAA2BF,GAC5C,GAAInH,GQlIV5F,KRmIUmO,EAAevI,EAAK/D,OAAO6G,0BAA0B9C,EAAK9B,QAAQC,UAAU6B,EAAK0B,iBACnFgB,gBQlIR,oBRmIQ8F,SAAUxI,EAAK8G,aQlIvBvH,GRmIQkJ,KQhIR,kBRmIMzI,GAAK/D,OAAO+F,KAAKuG,GAAclH,KAAK,SAAUwC,GAC5C,GAAI7D,EAAK/D,OAAO+G,QAAQa,EAAQ,WQlIxC,CRmIU,GAAI6E,GAAgB1I,EAAK/D,OAAO6G,0BAA0ByF,GACxD7F,gBQlIZ,qBRmIY+B,QAASkE,SAAS9E,EAAO1B,GAAG4E,MQlIxC,ERmIY7C,QAASvG,6EQlIrBwJ,GRmIYyB,cAAe5I,EAAK/D,OAAO4M,YQjIvC,aRmIU7I,GAAK/D,OAAO+F,KAAK0G,GAAerH,KAAK,SAAUyH,UAIrDvB,wBAAyB,SAAiCwB,EAAUzB,GAClE,GAAItH,GQ/HV5F,IRiIgB4F,GAAK9B,QAAQC,UAAU6B,EQhIvC0B,eRiIM,IAAgB,GAAZqH,EQhIV,CRiIQ,GAAIC,IACF1F,cQhIV,eRiIUC,aQhIV,WRiIU0F,gBQhIV,URiIUC,aQhIV,6CRiIUC,YQhIV,eRiIUhE,OAAQmC,EQ/HlB/H,GRiIQS,GAAK/D,OAAO+F,KAAKgH,GAAoB3H,KAAK,SAAUwC,GAClD,GAAIA,EAAOuF,WAAa,EQhIlC,CRiIY,GAAIC,GAA+B,GAArBxF,EAAOuF,YAAmBvF,EAAOkD,KAAKuC,OAAOC,QAAU1F,EAAOkD,KAAKuC,OQhI7FC,ORiIgBC,GACFjG,aQhId,QRiIcD,cQhId,URiIcT,cAAewG,EQhI7BjF,ORiIc1B,gBQ/Hd,oBRiIYjF,GAAE4E,KAAKgH,EAAS,SAAUI,EAAMrN,GAC9BoN,EAAY,KAAOpN,EAAM,GAAK,OAASqN,EQhIrDlK,KRkIYS,EAAK0J,eAAepC,EQhIhCkC,URoIQxJ,GAAK0J,eQhIbpC,IRmIIoC,eAAgB,SAAwBpC,EAAQkC,GAC9C,GAAIxJ,GQhIV5F,IRiIM,IAAuB,GAAnBkN,EAAO5I,SACTsB,EAAK/D,OAAO0N,qBACVpK,GAAI+H,EQhId/H,GRiIUuI,QAASR,EQ9HnBrJ,QRiIQ+B,EAAKrG,KQhIb0B,aRiIQ2E,EAAKrG,KQ/Hb2B,gBACA,CRgIQ,GAAIsO,MACAC,KACAC,IAEJ,IADAA,EAAOxR,KAAKgP,EQ/HpB3I,ORgIYmL,GAAUA,EAAO1F,OAAS,EQ/HtC,CRgIU,GAAI2F,KACJD,GAAOvL,OAAO,SAAUyL,EAAK5N,GAC3B2N,EAAI,IAAM/J,EAAKiK,GAAK,oBQ/HhC,kBRgIYF,EAAI,IAAM/J,EAAKiK,GAAK,cQ/HhC,SRgIYF,EAAI,IAAM/J,EAAKiK,GAAK,gBAAkBD,EQ/HlD5M,QRgIY2M,EAAI,IAAM/J,EAAKiK,GAAK,oBQ/HhC,ORgIYF,EAAI,IAAM/J,EAAKiK,GAAK,cQ/HhC,IRgIYjK,EQ/HZiK,ORiIUF,EAAIlH,cAAgB7C,EAAKiK,GQ/HnC,ERgIUF,EAAIxG,aQ/Hd,QRgIUwG,EAAIzG,cQ/Hd,URgIUtD,EAAK/D,OAAO+F,KAAK+H,GAAK1I,KAAK,SAAU6I,GACnC,IAAK,GAAIlG,GAAI,EAAGA,EAAIhE,EAAKiK,GAAIjG,IQ/HzC,CRgIc,GAAImG,GAAMnK,EAAK/D,OAAOiG,gBAAgBgI,EAAO,IAAMlG,EQ/HjE,0BRgI4B9J,IAAViQ,EAAI,IACmB,WAArBA,EAAI,GAAG7D,YACTuD,EAAUA,EAAQO,OQ/HpCD,IRmIY,GAAIE,GQ/HhB,ERwJY,IAxBAR,EAAQtL,OAAO,SAAU4L,EAAK/N,GAC5B,GAAI+N,EAAIG,aAAeR,EAAO,GAAG1M,QAE/B,GADAiN,GAAcF,EAAI/M,QQ/HlC,IRgIyC,KAArBkK,EAAO1I,YAA0C,KAArB0I,EAAO1I,WQ/HvD,CRgIkB,GAAI2L,IACFC,QAASlD,EQ/H7B/H,GRgIoBkJ,KQ/HpB,ORgIoBxK,KAAMqJ,EAAOrJ,KQ/HjC,URgIoBwM,MAAON,EQ/H3B/M,QRgIoBsN,WQ9HpB,WRgIkBd,GAAWtR,KQ/H7BiS,ORgIuB,IAAyB,KAArBjD,EAAO1I,WQ/HlC,CRgIkB,GAAI+L,IACFH,QAASlD,EQ/H7B/H,GRgIoBkJ,KQ/HpB,SRgIoBxK,KAAMqJ,EAAOrJ,KQ/HjC,YRgIoBwM,MAAON,EQ/H3B/M,QRgIoBsN,WQ9HpB,WRgIkBd,GAAWtR,KQ/H7BqS,MRmIgBrD,EAAOtI,QAA8C,GAArCqL,EAAWnN,QAAQoK,EAAOtI,OQ/H1D,CRgIc,GAAIuL,IACFC,QAASlD,EQ/HzB/H,GRgIgBkJ,KQ/HhB,ORgIgBxK,KAAMqJ,EAAOrJ,KQ/H7B,URgIgBwM,MAAOnD,EQ/HvBtI,MRgIgB0L,WQ9HhB,URgIcd,GAAWtR,KQ/HzBiS,GRiIgBjD,EAAOlJ,UACTkJ,EAAOlJ,SAASG,OAAO,SAAU7B,EAAMN,GACrC,GAAa,KAATM,IAA4C,GAA7B2N,EAAWnN,QAAQR,GQ/HtD,CRgIkB,GAAI6N,IACFC,QAASlD,EQ/H7B/H,GRgIoBkJ,KQ/HpB,ORgIoBxK,KAAMqJ,EAAOrJ,KQ/HjC,URgIoBwM,MQ/HpB/N,ERgIoBgO,WQ9HpB,URgIkBd,GAAWtR,KQ/H7BiS,KRoIY,IAAIK,IACFJ,QAASlD,EQ9HvB/H,GR+HckJ,KQ9Hd,SR+HcxK,KAAMqJ,EAAOrJ,KQ9H3B,YR+HcwM,MAAOzK,EQ9HrB6K,eR+HcH,WQ7Hd,WR+HYd,GAAWtR,KQ9HvBsS,ER+HY,IAAIE,IACFN,QAASlD,EQ9HvB/H,GR+HckJ,KQ9Hd,SR+HcxK,KAAMqJ,EAAOrJ,KQ9H3B,YR+HcwM,MAAOzK,EQ9HrB+K,YR+HcL,WQ7Hd,WR+HYd,GAAWtR,KQ5HvBwS,ER8HY,IAAIE,MACA1I,EQ7HhB,CR8HYsH,GAAWrL,OAAO,SAAUgM,EAAGvG,GAC7BgH,EAAkB,IAAM1I,EAAQ,iBQ7H9C,QR8Hc0I,EAAkB,IAAM1I,EAAQ,kBQ7H9C,mBR8Hc0I,EAAkB,IAAM1I,EAAQ,gBQ7H9C,UR8Hc0I,EAAkB,IAAM1I,EAAQ,oBQ7H9C,oBR8Hc0I,EAAkB,IAAM1I,EAAQ,WAAaiI,EQ7H3DC,QR8HcQ,EAAkB,IAAM1I,EAAQ,UAAYiI,EQ7H1DE,MR8HcO,EAAkB,IAAM1I,EAAQ,SAAWiI,EQ7HzD9B,KR8HcuC,EAAkB,IAAM1I,EAAQ,SAAWiI,EQ7HzDtM,KR8Hc+M,EAAkB,IAAM1I,EAAQ,eAAiBiI,EQ7H/DG,WACApI,MR+HY0I,EAAkBnI,cAAgB+G,EQ7H9CxF,OR8HY4G,EAAkBzH,aQ7H9B,QR8HYyH,EAAkB1H,cQ7H9B,cR8H+BpJ,IAAfsP,EACFxJ,EAAK/D,OAAO+F,KAAKgJ,GAAmB3J,KAAK,SAAU4J,GACjDjL,EAAKrG,KQ5HrB2B,YR6HgB0E,EAAKrG,KQ5HrB0B,eR+Hc2E,EAAK/D,OAAO+F,KAAKwH,GAAanI,KAAK,SAAU6J,GAC3ClL,EAAK/D,OAAO+F,KAAKgJ,GAAmB3J,KAAK,SAAU4J,GACjDjL,EAAKrG,KQ3HvB0B,aR4HkB2E,EAAKrG,KQ3HvB2B,qBRmII6P,gBAAiB,WACf/Q,KAAKT,KAAKqB,UAAYZ,KAAKT,KQ1HjCqB,UR4HIoQ,WAAY,QAASA,YAAWhK,MAC9BhH,KAAKoF,WAAW1E,UAAYV,KAAKT,KAAKmB,UAAUyD,OAAO,SAAU4L,KAC/D,WAAcjQ,IAAPiQ,KAAoBrI,KAAKV,MAAQ,EAAI,KAAO+I,IQ1H3DvL,aR4HMxE,KAAKiR,KAAKjR,KAAKoF,WAAY,gBAAiBpF,KAAKT,KAAK4B,eAAegD,OAAO,SAAU4L,KACpF,WAAcjQ,IAAPiQ,KAAoBrI,KAAKV,MAAQ,EAAI,KAAO+I,IQ1H3DvL,eR6HI0M,UAAW,SAAmBC,GAC5B,GAAIvL,GQ1HV5F,IR2HsC,IAA5B4F,EAAKhC,SAASY,YAChBnB,EAAE4E,KAAKrC,EAAKjF,cAAe,SAAUiJ,EAAGwH,GAClCxL,EAAK/D,OAAO+G,QAAQuI,IAAWC,EAAMpO,SAAWmO,IAClDvL,EAAKhC,SAASW,MQzH1B6M,OR+HElP,QAAS,WACP,GAAI0D,GQzHR5F,IR0HQ4F,GAAKhC,SAASuB,IAChBS,EAAKoD,YAAYpD,EAAKhC,SQzH5BuB,IR0HMS,EAAKoL,WAAWpL,EAAKhC,SQzH3BY,gBR0HoC1E,IAA1B8F,EAAKhC,SAASU,WAChBsB,EAAKhC,SAASU,UQzHtB,GR2HMjB,EAAE4E,KAAKrC,EAAKrG,KAAKmB,UAAW,SAAUkJ,EAAGyH,GACvC,GAAIzL,EAAKhC,SAASuB,KAAOkM,EAAElM,GAEzB,MADAS,GAAKhC,SAAS0N,WAAaD,EQzHrCC,YACA,MR6HM1L,EAAKhC,SAAS0N,WQzHpB,OR0HU1L,EAAKjC,UACPiC,EAAKhC,SAASY,WAAaoB,EAAKvD,QAAQ,GQzHhD8C,GR0HQS,EAAKoL,WAAWpL,EAAKvD,QAAQ,GQzHrC8C,MR2HQS,EAAKhC,SAASY,WAAaoB,EAAKvD,QAAQ,GQzHhD8C,GR0HQS,EAAKoL,WAAWpL,EAAKvD,QAAQ,GQzHrC8C,KR2HMS,EAAKhC,SAASU,UQzHpB,GR4H2B,eADZxD,KAAKC,MAAM6E,EAAKrD,qBAAqBqD,EAAKpD,sBQzHzDC,eR0Ha8O,YACP3L,EAAKrG,KAAKgB,QAAUqF,EAAKrG,KAAKgB,QAAQ4D,OAAO,SAAU8G,GACrD,MAAOA,GAAGsG,YQzHlB,IRyH+BtG,EAAGsG,UAAUzO,QAAQ,qBAKvB0O,KAAK3U,oBAAqBC,oBAAoB,KAIrE2U,IACA,SAAU7U,EAAQC,EAAqBC,GAE7C,YSn2BA,SAAAC,GAAAC,GACAF,EAAA,KTm2BqB,GAAI4U,GAAuH5U,EAAoB,KSp2BpK6U,EAAA7U,EAAA,KAGAQ,EAAAR,EAAA,GAQAS,EAAAR,EAKAS,EAAAF,EACAoU,EAAA,EACAC,EAAA,GATA,EAWApU,EAPA,KAEA,KAUAV,GAAA,EAAAW,EAAA,ST22BMoU,IACA,SAAUhV,EAAQiB,EAASf,GUl4BjC,GAAAgB,GAAAhB,EAAA,IACA,iBAAAgB,SAAAlB,EAAAmB,EAAAD,EAAA,MACAA,EAAAE,SAAApB,EAAAiB,QAAAC,EAAAE,OAEAlB,GAAA,gBAAAgB,GAAA,IV24BM+T,IACA,SAAUjV,EAAQiB,EAASf,GWn5BjCe,EAAAjB,EAAAiB,QAAAf,EAAA,SAKAe,EAAAK,MAAAtB,EAAAmB,EAAA,6HAAoJ,IAAQI,QAAA,EAAAC,SAAA,gEAAAC,SAAAC,SAAA,kDAAAC,KAAA,kBAAAC,gBAAA,0KAA+WC,WAAA,OX45BrgBqT,IACA,SAAUlV,EAAQC,EAAqBC,GAE7C,YYz4BAD,GAAA,GZ64BEqC,OAAQ,WY34BV,YZ44BES,WACAJ,KAAM,WACJ,YAMEwS,IACA,SAAUnV,EAAQC,EAAqBC,GAE7C,Yap7BA,IAAAkV,GAAA,WAA0B,GAAAC,GAAAjS,KAAakS,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAAwB,OAAAE,GAAA,WAAqBE,YAAA,WAAAC,OAA8BtJ,GAAA,kBAAqBmJ,EAAA,OAAYE,YAAA,WAAAC,OAA8BC,KAAA,UAAgBA,KAAA,WAAeJ,EAAA,QAAAH,EAAAQ,GAAA,eAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAAyDE,YAAA,0CAAoDF,EAAA,SAAcM,aAAaC,MAAA,UAAgBP,EAAA,SAAcE,YAAA,gCAA0CF,EAAA,KAAAH,EAAAW,GAAAX,EAAA,kBAAAY,GAA4C,MAAAT,GAAA,MAAAH,EAAAQ,GAAAR,EAAAa,GAAAD,WAAoCZ,EAAAQ,GAAA,KAAAL,EAAA,QAAAH,EAAAW,GAAAX,EAAA,kBAAAc,GAAoE,MAAAX,GAAA,MAAgBY,OAAQC,mBAAA,QAAAF,EAAA/L,KAAA,oBAA+D,QAAA+L,EAAA/L,KAAAoL,EAAA,MAAkCE,YAAA,UAAAC,OAA6BW,QAAA,OAAejB,EAAAQ,GAAA,iBAAAR,EAAAa,GAAAC,EAAA5V,MAAAkN,QAAA,QAAA+H,EAAA,UAAAH,EAAAQ,GAAAR,EAAAa,GAAAC,EAAA5V,MAAAqR,kBAAAyD,EAAAQ,GAAA,KAAAR,EAAAa,GAAAb,EAAApQ,OAAAyI,eAAAyI,EAAA5V,MAAAgW,QAAA,qCAAAlB,EAAAmB,KAAAnB,EAAAQ,GAAA,aAAAM,EAAA/L,KAAAoL,EAAA,MAAAH,EAAAQ,GAAAR,EAAAa,GAAAC,EAAA5V,MAAA2Q,kBAAAmE,EAAAmB,KAAAnB,EAAAQ,GAAA,aAAAM,EAAA/L,KAAAoL,EAAA,MAAAH,EAAAQ,GAAAR,EAAAa,GAAAC,EAAA5V,MAAAiN,oBAAA6H,EAAAmB,KAAAnB,EAAAQ,GAAA,aAAAM,EAAA/L,KAAAoL,EAAA,MAAAH,EAAAQ,GAAAR,EAAAa,GAAAC,EAAA5V,MAAAoN,oBAAA0H,EAAAmB,iBACnvBC,KACAC,GAAiBtB,SAAAqB,kBACjBxW,GAAA,Kby7BM0W,IACA,SAAU3W,EAAQC,EAAqBC,GAE7C,Yc/7BA,IAAAkV,GAAA,WAA0B,GAAAC,GAAAjS,KAAakS,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAAwB,OAAAE,GAAA,OAAAA,EAAA,WAA+BE,YAAA,aAAuBF,EAAA,OAAYE,YAAA,WAAAC,OAA8BC,KAAA,UAAgBA,KAAA,WAAeJ,EAAA,QAAaM,aAAac,MAAA,UAAgBvB,EAAAQ,GAAA,wBAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAAuDM,aAAac,MAAA,QAAAC,QAAA,WAAmC,GAAAxB,EAAA1S,KAAAqB,UAAAqR,EAAArO,SAAA0N,YAAA,SAAAW,EAAArO,SAAA0N,WAAAc,EAAA,aAA8GG,OAAOmB,KAAA,cAAoBC,IAAKC,MAAA,SAAAC,GAAyB5B,EAAAvM,WAAA,gBAA6BuM,EAAAmB,KAAAnB,EAAAQ,GAAA,QAAAR,EAAA1S,KAAAqB,UAAAqR,EAAArO,SAAA0N,YAAA,SAAAW,EAAArO,SAAA0N,WAAAc,EAAA,aAAkIG,OAAOmB,KAAA,gBAAsBC,IAAKC,MAAA3B,EAAAlB,mBAA6BkB,EAAAmB,KAAAnB,EAAAQ,GAAA,QAAAR,EAAA1S,KAAAkB,gBAAAX,IAAAmS,EAAA1S,KAAAe,KAAAgR,WAAAc,EAAA,aAA4GG,OAAOmB,KAAA,gBAAsBC,IAAKC,MAAA,SAAAC,GAAyB5B,EAAAzL,UAAA,gBAA4ByL,EAAAmB,KAAAnB,EAAAQ,GAAA,KAAAR,EAAArO,SAAA0N,YAAA,WAAAW,EAAArO,SAAA0N,WAAAc,EAAA,aAAwGG,OAAOmB,KAAA,kBAAwBC,IAAKC,MAAA,SAAAC,GAAyB5B,EAAAtL,mBAAqBsL,EAAAmB,MAAA,KAAAnB,EAAAQ,GAAA,KAAAL,EAAA,OAAAA,EAAA,WAAqD0B,IAAA,WAAAvB,OAAsB5K,MAAAsK,EAAArO,SAAA0B,MAAA2M,EAAA3M,MAAAyO,iBAAA9B,EAAA+B,gBAAA,cAAAC,cAAA,WAAiH7B,EAAA,gBAAqBG,OAAO2B,MAAA,OAAAC,KAAA,UAA8B/B,EAAA,YAAiBG,OAAO3R,SAAAqR,EAAA1S,KAAAqB,UAA6B+G,OAAQxK,MAAA8U,EAAArO,SAAA,KAAAwQ,SAAA,SAAAC,GAAmDpC,EAAAhB,KAAAgB,EAAArO,SAAA,OAAAyQ,IAAoCC,WAAA,oBAA6B,GAAArC,EAAAQ,GAAA,KAAAL,EAAA,gBAAqCG,OAAO2B,MAAA,YAAAC,KAAA,cAAuC/B,EAAA,aAAkBM,aAAa6B,QAAA,SAAkBhC,OAAQ3R,SAAAqR,EAAA1S,KAAAqB,SAAA4T,eAAA,UAAAC,iBAAA,UAAAC,cAAA,YAAAC,gBAAA,YAAsIhN,OAAQxK,MAAA8U,EAAArO,SAAA,SAAAwQ,SAAA,SAAAC,GAAuDpC,EAAAhB,KAAAgB,EAAArO,SAAA,WAAAyQ,IAAwCC,WAAA,wBAAiC,GAAArC,EAAAQ,GAAA,KAAAL,EAAA,gBAAqCE,YAAA,mBAAAC,OAAsC2B,MAAA,aAAAC,KAAA,kBAA4C/B,EAAA,kBAAuBG,OAAOqC,OAAA,aAAAhU,SAAAqR,EAAA1S,KAAAqB,SAAAoG,KAAA,OAAA6N,YAAA,WAAyFlN,OAAQxK,MAAA8U,EAAArO,SAAA,gBAAAwQ,SAAA,SAAAC,GAA8DpC,EAAAhB,KAAAgB,EAAArO,SAAA,kBAAAyQ,IAA+CC,WAAA,8BAAwCrC,EAAAQ,GAAA,KAAAL,EAAA,kBAAmCG,OAAOqC,OAAA,aAAAhU,SAAAqR,EAAA1S,KAAAqB,SAAAoG,KAAA,OAAA6N,YAAA,YAA0FlN,OAAQxK,MAAA8U,EAAArO,SAAA,iBAAAwQ,SAAA,SAAAC,GAA+DpC,EAAAhB,KAAAgB,EAAArO,SAAA,mBAAAyQ,IAAgDC,WAAA,gCAAyC,GAAArC,EAAAQ,GAAA,KAAAL,EAAA,gBAAqCG,OAAO2B,MAAA,iBAAAC,KAAA,gBAA8C/B,EAAA,kBAAuBG,OAAO3R,UAAAqR,EAAA1S,KAAAkB,YAAgCkT,IAAK5J,OAAA,SAAA8J,GAA0B5B,EAAAjB,WAAAiB,EAAArO,SAAAY,cAAyCmD,OAAQxK,MAAA8U,EAAArO,SAAA,WAAAwQ,SAAA,SAAAC,GAAyDpC,EAAAhB,KAAAgB,EAAArO,SAAA,aAAAyQ,IAA0CC,WAAA,wBAAmCrC,EAAAW,GAAAX,EAAA,iBAAA6C,GAAkC,MAAA1C,GAAA,YAAsBpQ,IAAA8S,EAAA3P,GAAAoN,OAAgBwC,KAAA,OAAAb,MAAAY,EAAA3P,GAAA6P,OAAA,GAAAC,UAAA,uDAAsGhD,EAAAQ,GAAAR,EAAAa,GAAAgC,EAAAjR,aAA2B,GAAAoO,EAAAQ,GAAA,SAAA3S,IAAAmS,EAAA7M,WAAA1E,UAAAsJ,QAAA,MAAAiI,EAAArO,SAAAY,WAAA4N,EAAA,gBAAsHG,OAAO2B,MAAA,gBAAAC,KAAA,cAA2ClC,EAAA,gBAAAG,EAAA,aAAwCG,OAAOsC,YAAA,WAAAjU,aAAAd,KAAAmS,EAAArO,SAAAuB,IAAgEwO,IAAK5J,OAAA,SAAA8J,GAA0B5B,EAAAf,UAAAe,EAAArO,SAAAe,YAAsCgD,OAAQxK,MAAA8U,EAAArO,SAAA,SAAAwQ,SAAA,SAAAC,GAAuDpC,EAAAhB,KAAAgB,EAAArO,SAAA,WAAAyQ,IAAwCC,WAAA,sBAAiCrC,EAAAW,GAAAX,EAAA7M,WAAA,uBAAA0P,GAAmD,MAAA1C,GAAA,aAAuBpQ,IAAA8S,EAAA3P,GAAAoN,OAAgB2B,MAAAY,EAAAjR,KAAA1G,MAAA2X,EAAA3P,SAA+BiN,EAAA,aAAmBG,OAAOsC,YAAA,WAAAjU,UAAAqR,EAAA1S,KAAAkB,YAAyDkT,IAAK5J,OAAA,SAAA8J,GAA0B5B,EAAAf,UAAAe,EAAArO,SAAAe,YAAsCgD,OAAQxK,MAAA8U,EAAArO,SAAA,SAAAwQ,SAAA,SAAAC,GAAuDpC,EAAAhB,KAAAgB,EAAArO,SAAA,WAAAyQ,IAAwCC,WAAA,sBAAiCrC,EAAAW,GAAAX,EAAA7M,WAAA,mBAAA0P,GAA+C,MAAA1C,GAAA,aAAuBpQ,IAAA8S,EAAA3P,GAAAoN,OAAgB2B,MAAAY,EAAAjR,KAAA1G,MAAA2X,EAAA3P,SAA+B8M,EAAAQ,GAAA,mCAAA3S,KAAAmS,EAAArO,SAAAuB,GAAAiN,EAAA,cAAwFE,YAAA,OAAAC,OAA0B2C,OAAA,OAAApX,QAAA,4HAAAqX,UAAA,SAAyK/C,EAAA,KAAUE,YAAA,8BAAsCL,EAAAmB,KAAAnB,EAAAQ,GAAA,mCAAA3S,KAAAmS,EAAArO,SAAAuB,GAAAiN,EAAA,eAAmGG,OAAO2B,MAAA,mBAA0BvM,OAAQxK,MAAA8U,EAAA,gBAAAmC,SAAA,SAAAC,GAAqDpC,EAAAhN,gBAAAoP,GAAwBC,WAAA,qBAA+BrC,EAAAmB,MAAA,GAAAnB,EAAAmB,KAAAnB,EAAAQ,GAAA,KAAAR,EAAA1S,KAAAoB,cAAAqJ,OAAA,EAAAoI,EAAA,gBAA0FG,OAAO2B,MAAA,mBAAAC,KAAA,WAA2C/B,EAAA,aAAkBG,OAAO6C,WAAA,GAAAP,YAAA,WAAAjU,SAAAqR,EAAA1S,KAAAqB,UAAsE+G,OAAQxK,MAAA8U,EAAArO,SAAA,MAAAwQ,SAAA,SAAAC,GAAoDpC,EAAAhB,KAAAgB,EAAArO,SAAA,QAAAyQ,IAAqCC,WAAA,mBAA8BrC,EAAAW,GAAAX,EAAA1S,KAAA,uBAAAuV,GAA6C,MAAA1C,GAAA,aAAuBpQ,IAAA8S,EAAA9R,QAAAuP,OAAqB2B,MAAAY,EAAA5I,UAAA/O,MAAA2X,EAAA9R,eAAyC,GAAAiP,EAAAmB,KAAAnB,EAAAQ,GAAA,KAAAL,EAAA,gBAA+CG,OAAO2B,MAAA,WAAAC,KAAA,WAAmC/B,EAAA,aAAkBG,OAAO6C,WAAA,GAAAC,UAAA,GAAAR,YAAA,WAAAjU,SAAAqR,EAAA1S,KAAAqB,UAAqF+G,OAAQxK,MAAA8U,EAAArO,SAAA,MAAAwQ,SAAA,SAAAC,GAAoDpC,EAAAhB,KAAAgB,EAAArO,SAAA,QAAAyQ,IAAqCC,WAAA,mBAA8BrC,EAAAW,GAAAX,EAAA1S,KAAA,iBAAAuV,GAAuC,OAA2B,GAA3BA,EAAAzI,OAAAvJ,QAAA,KAA2BsP,EAAA,aAA0BpQ,IAAA8S,EAAAzI,OAAAkG,OAAoB2B,MAAAY,EAAAxI,SAAAnP,MAAA2X,EAAAzI,UAAqC4F,EAAAmB,SAAW,GAAAnB,EAAAQ,GAAA,KAAAL,EAAA,gBAAsCG,OAAO2B,MAAA,qBAAAC,KAAA,cAAgD/B,EAAA,aAAkBG,OAAO6C,WAAA,GAAAE,SAAA,GAAAT,YAAA,WAAAjU,SAAAqR,EAAA1S,KAAAqB,UAAoF+G,OAAQxK,MAAA8U,EAAArO,SAAA,SAAAwQ,SAAA,SAAAC,GAAuDpC,EAAAhB,KAAAgB,EAAArO,SAAA,WAAAyQ,IAAwCC,WAAA,sBAAiCrC,EAAAW,GAAAX,EAAA1S,KAAA,iBAAAuV,GAAuC,MAAA1C,GAAA,aAAuBpQ,IAAA8S,EAAAzI,OAAAkG,OAAoB2B,MAAAY,EAAAxI,SAAAnP,MAAA2X,EAAAzI,cAAuC,GAAA4F,EAAAQ,GAAA,KAAAL,EAAA,gBAAsCG,OAAO2B,MAAA,iBAAAC,KAAA,UAAwC/B,EAAA,YAAiBG,OAAO3R,SAAAqR,EAAA1S,KAAAqB,UAA6B+S,IAAK5J,OAAA,SAAA8J,GAA0B5B,EAAA7N,YAAeuD,OAAQxK,MAAA8U,EAAArO,SAAA,KAAAwQ,SAAA,SAAAC,GAAmDpC,EAAAhB,KAAAgB,EAAArO,SAAA,OAAAyQ,IAAoCC,WAAA,oBAA6B,GAAArC,EAAAQ,GAAA,KAAAL,EAAA,gBAAqCG,OAAO2B,MAAA,YAAAC,KAAA,UAAmC/B,EAAA,YAAiBG,OAAO3R,SAAAqR,EAAA1S,KAAAqB,UAA6B+S,IAAK5J,OAAA,SAAA8J,GAA0B5B,EAAA7N,YAAeuD,OAAQxK,MAAA8U,EAAArO,SAAA,KAAAwQ,SAAA,SAAAC,GAAmDpC,EAAAhB,KAAAgB,EAAArO,SAAA,OAAAyQ,IAAoCC,WAAA,oBAA6B,GAAArC,EAAAQ,GAAA,KAAAL,EAAA,gBAAqCG,OAAO2B,MAAA,eAAAC,KAAA,UAAsC/B,EAAA,YAAiBG,OAAO3R,SAAAqR,EAAA1S,KAAAqB,UAA6B+G,OAAQxK,MAAA8U,EAAArO,SAAA,KAAAwQ,SAAA,SAAAC,GAAmDpC,EAAAhB,KAAAgB,EAAArO,SAAA,OAAAyQ,IAAoCC,WAAA,oBAA6B,GAAArC,EAAAQ,GAAA,KAAAL,EAAA,gBAAqCG,OAAO2B,MAAA,qBAAAC,KAAA,aAA+C/B,EAAA,aAAkBG,OAAO3R,SAAAqR,EAAA1S,KAAAqB,UAA6B+S,IAAK5J,OAAA,SAAA8J,GAA0B5B,EAAA7N,YAAeuD,OAAQxK,MAAA8U,EAAArO,SAAA,QAAAwQ,SAAA,SAAAC,GAAsDpC,EAAAhB,KAAAgB,EAAArO,SAAA,UAAAyQ,IAAuCC,WAAA,uBAAgC,GAAArC,EAAAQ,GAAA,KAAAL,EAAA,gBAAqCG,OAAO2B,MAAA,qBAAAC,KAAA,cAAgD/B,EAAA,YAAiBG,OAAO3R,SAAAqR,EAAA1S,KAAAqB,UAA6B+G,OAAQxK,MAAA8U,EAAArO,SAAA,SAAAwQ,SAAA,SAAAC,GAAuDpC,EAAAhB,KAAAgB,EAAArO,SAAA,WAAAyQ,IAAwCC,WAAA,wBAAiC,aAAArC,EAAAQ,GAAA,KAAAR,EAAA1S,KAAAkB,WAA6JwR,EAAAmB,KAA7JhB,EAAA,eAAqEG,OAAOgD,SAAAtD,EAAA5M,iBAAAmQ,UAAA,sCAAiF,IACnsPnC,KACAC,GAAiBtB,SAAAqB,kBACjBxW,GAAA,Kdo8BM4Y,IACA,SAAU7Y,EAAQC,EAAqBC,GAE7C,Ye18BA,IAAAkV,GAAA,WAA0B,GAAAC,GAAAjS,KAAakS,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAAwB,OAAAE,GAAA,OAAiBG,OAAOtJ,GAAA,UAAamJ,EAAA,OAAYM,aAAagD,KAAA,IAAAnB,QAAA,OAAAoB,cAAA,SAAAC,kBAAA,gBAAAC,YAAA,OAAAC,gBAAA,SAA+H1D,EAAA,UAAAH,EAAAQ,GAAA,KAAAR,EAAA,aAAAG,EAAA,cAA+DG,OAAOzU,QAAA,oBAAAqX,UAAA,SAAiD/C,EAAA,aAAkBG,OAAOwC,KAAA,OAAArB,KAAA,cAAkCC,IAAKC,MAAA,SAAAC,GAAyB5B,EAAA3Q,oBAAqB,GAAA2Q,EAAAmB,MAAA,GAAAnB,EAAAQ,GAAA,KAAAL,EAAA,YAA8CG,OAAOhT,KAAA0S,EAAAzS,MAAAwV,OAAA,GAAAe,aAAA,sBAA8D3D,EAAA,mBAAwBG,OAAO2B,MAAA,GAAAvB,MAAA,QAA0BqD,YAAA/D,EAAAgE,KAAsBjU,IAAA,UAAAkU,GAAA,SAAAC,GAAiC,OAAA/D,EAAA,OAAkBM,aAAa0D,aAAA,SAAAC,OAAA,WAAyC1C,IAAKC,MAAA,SAAAC,GAAyB5B,EAAA9R,iBAAAgW,EAAA/V,SAAkCgS,EAAA,KAAUE,YAAA,sCAAgDL,EAAAQ,GAAA,KAAAL,EAAA,wBAAyCG,OAAO4B,KAAA,OAAAD,MAAA,MAAAoC,SAAA,QAAAC,QAAA,KAAAtU,UAAA,cAAsFgQ,EAAAQ,GAAA,KAAAL,EAAA,mBAAoCG,OAAO4B,KAAA,WAAAD,MAAA,aAAAsC,yBAAA,GAAoER,YAAA/D,EAAAgE,KAAsBjU,IAAA,UAAAkU,GAAA,SAAAC,GAAiC,OAAA/D,EAAA,eAA0BG,OAAOkE,eAAA,EAAAC,eAAA,GAAAC,WAAAvQ,KAAAC,MAAAE,MAAA4P,EAAA/V,IAAA4E,UAAA,EAAAmR,EAAA/V,IAAA4E,oBAAqHiN,EAAAQ,GAAA,KAAAL,EAAA,mBAAoCG,OAAO4B,KAAA,aAAAD,MAAA,OAAAsC,yBAAA,GAAgER,YAAA/D,EAAAgE,KAAsBjU,IAAA,UAAAkU,GAAA,SAAAC,GAAiC,OAAAlE,EAAAQ,GAAA,aAAAR,EAAAa,GAAAb,EAAA7P,WAAA+T,EAAA/V,IAAAoE,YAAAyN,EAAA7P,WAAA+T,EAAA/V,IAAAoE,YAAAX,KAAA,0BAA0IoO,EAAAQ,GAAA,KAAAL,EAAA,mBAAoCG,OAAO4B,KAAA,OAAAD,MAAA,WAAAsC,yBAAA,KAA+DvE,EAAAQ,GAAA,KAAAL,EAAA,mBAAoCG,OAAO4B,KAAA,OAAAD,MAAA,WAAAsC,yBAAA,KAA+DvE,EAAAQ,GAAA,KAAAL,EAAA,mBAAoCG,OAAO4B,KAAA,OAAAD,MAAA,SAAAsC,yBAAA,KAA6DvE,EAAAQ,GAAA,KAAAL,EAAA,mBAAoCG,OAAO4B,KAAA,OAAAD,MAAA,gBAAAsC,yBAAA,GAAmER,YAAA/D,EAAAgE,KAAsBjU,IAAA,UAAAkU,GAAA,SAAAC,GAAiC,OAAA/D,EAAA,WAAAtS,IAAAmS,EAAAxS,kBAAA0W,EAAA/V,IAAAwE,OAAAwN,EAAA,OAAgFE,YAAA,SAAAI,aAAkCkE,OAAA,gBAAwBrE,OAAQsE,OAAA,KAAAlE,MAAA,KAAAmE,MAAA7E,EAAAxS,kBAAA0W,EAAA/V,IAAAwE,OAAA0H,SAAAyK,IAAA9E,EAAArS,WAAAqS,EAAAxS,kBAAA0W,EAAA/V,IAAAwE,OAAAoS,WAAwJ/E,EAAAmB,KAAAnB,EAAAQ,GAAA,SAAA3S,IAAAmS,EAAAxS,kBAAA0W,EAAA/V,IAAAwE,OAAAwN,EAAA,QAAAH,EAAAQ,GAAAR,EAAAa,GAAAqD,EAAA/V,IAAA0M,cAAAmF,EAAAmB,eAA4I,QACriFC,KACAC,GAAiBtB,SAAAqB,kBACjBxW,GAAA","file":"static/js/8.05d1cb7c42fe8068275e.js","sourcesContent":["webpackJsonp([8],{\n\n/***/ 879:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetSetting_vue__ = __webpack_require__(930);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4695fe4e_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetSetting_vue__ = __webpack_require__(940);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(928)\n}\nvar normalizeComponent = __webpack_require__(1)\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetSetting_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4695fe4e_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetSetting_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 919:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetDialog_vue__ = __webpack_require__(933);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4ccba1ba_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetDialog_vue__ = __webpack_require__(939);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(931)\n}\nvar normalizeComponent = __webpack_require__(1)\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4ccba1ba\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TargetDialog_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4ccba1ba_hasScoped_true_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TargetDialog_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 928:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(929);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(876)(\"4909c504\", content, true);\n\n/***/ }),\n\n/***/ 929:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(875)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"#tTbl #plusBtn{position:fixed;top:120px;right:30px;z-index:99;cursor:pointer}\", \"\", {\"version\":3,\"sources\":[\"D:/projects/bos/vuejs/src/components/static/TargetSetting.vue\"],\"names\":[],\"mappings\":\"AACA,eACE,eAAgB,AAChB,UAAW,AACX,WAAY,AACZ,WAAY,AACZ,cAAgB,CACjB\",\"file\":\"TargetSetting.vue\",\"sourcesContent\":[\"\\n#tTbl #plusBtn {\\n  position: fixed;\\n  top: 120px;\\n  right: 30px;\\n  z-index: 99;\\n  cursor: pointer;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 930:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_element_tree_grid_src_index_js__ = __webpack_require__(103);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_element_tree_grid__ = __webpack_require__(104);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_element_tree_grid___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_element_tree_grid__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_static_TargetDialog__ = __webpack_require__(919);\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__webpack_require__(37));\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: [\"targetLst\", \"options\", \"typeLst\", \"workerLst\", \"departmentLst\", \"targetFieldLst\", \"getTargets\", \"getObject\", \"rootId\", \"targetSavedLst\"],\n  components: { ElTreeGrid: __WEBPACK_IMPORTED_MODULE_2_element_tree_grid___default.a, ElTableTreeColumn: __WEBPACK_IMPORTED_MODULE_1_element_tree_grid_src_index_js__[\"a\" /* default */] },\n  data: function data() {\n    return {\n      dtSrc: [],\n      userWithAvatarLst: [],\n      editableUser: false\n    };\n  },\n\n  methods: {\n    loadAvatar: function loadAvatar(avatar) {\n      if (avatar == undefined) avatar = 'assets/images/avatars/profile.png';\n      avatar = avatar.replace('profile.jpg', 'profile.png');\n      var strAvatar = avatar === \"assets/images/avatars/profile.png\" ? this.$appUri.BaseURL + avatar : this.$appUri.BaseURL + avatar.replace('/', '') + \"&Height=50&Width=50\";\n      return strAvatar;\n    },\n    openTargetDetail: function openTargetDetail(row) {\n      var dataToPass = {\n        item: row,\n        workers: this.workerLst,\n\n        isEditable: false,\n        targetLst: this.targetLst,\n        departmentLst: this.departmentLst,\n        disabled: true,\n        targetFields: JSON.parse(this.targetFieldLst),\n        getTargets: this.getTargets,\n        getObject: this.getObject,\n        targetSavedLst: this.targetSavedLst\n      };\n      this.$hub.$emit(\"set-modal-data\", \"\", \"50%\", true, \"center\", __WEBPACK_IMPORTED_MODULE_3__components_static_TargetDialog__[\"a\" /* default */], false, \"\", dataToPass, true);\n      this.$hub.$emit(\"open-modal\");\n    },\n    addNewTarget: function addNewTarget() {\n      if (this.targetFieldLst && this.targetFieldLst.constructor != Array) return;\n      var dataToPass = { item: {},\n        workers: this.workerLst,\n        departments: this.departmentLst,\n        isEditable: true,\n        targetLst: this.targetLst,\n        departmentLst: this.departmentLst,\n        disabled: false,\n        targetFields: JSON.parse(this.targetFieldLst),\n        rootId: this.rootId,\n        getTargets: this.getTargets,\n        getObject: this.getObject,\n        targetSavedLst: this.targetSavedLst\n      };\n      this.$hub.$emit(\"set-modal-data\", \"\", \"50%\", true, \"center\", __WEBPACK_IMPORTED_MODULE_3__components_static_TargetDialog__[\"a\" /* default */], false, \"\", dataToPass, false);\n      this.$hub.$emit(\"open-modal\");\n    }\n  },\n  watch: {\n    targetLst: function targetLst(val) {\n      this.dtSrc = this.$Utils.treeify(val, this.options.key, this.options.parentKey, 'level');\n    }\n  },\n  created: function created() {\n    this.userWithAvatarLst = this.$Utils.rotateDementionArr(this.workerLst, 'UserId');\n    this.targetsObj = this.$Utils.rotateDementionArr(this.typeLst, 'Id');\n    this.dtSrc = this.$Utils.treeify(this.targetLst, this.options.key, this.options.parentKey, 'level');\n    var user = JSON.parse(this.$getItemLocalStorage(this.$localStorageConstant.LoggedOnUser));\n    if (this.$isSystemAdmin() || this.$isMantisAdmin()) {\n      this.editableUser = true;\n    } else if (user.GroupRoles) {\n      if (user.GroupRoles.Leader && user.GroupRoles.Leader.indexOf(user.Project.GroupId) > -1 || user.GroupRoles.Director && user.GroupRoles.Director.indexOf(user.Project.GroupId) > -1) {\n        this.editableUser = true;\n      }\n    } else {\n      this.editableUser = false;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 931:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(932);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(876)(\"46a499d8\", content, true);\n\n/***/ }),\n\n/***/ 932:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(875)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"@media only screen and (max-width:768px){.el-input[data-v-4ccba1ba],.el-radio[data-v-4ccba1ba],.el-select[data-v-4ccba1ba]{width:100%}.el-radio[data-v-4ccba1ba]{margin-left:0!important}}\", \"\", {\"version\":3,\"sources\":[\"D:/projects/bos/vuejs/src/components/static/TargetDialog.vue\"],\"names\":[],\"mappings\":\"AACA,yCAEA,kFACI,UAAY,CACf,AACD,2BACI,uBAA4B,CAC/B,CACA\",\"file\":\"TargetDialog.vue\",\"sourcesContent\":[\"\\n@media only screen and (max-width: 768px) {\\n  /* For mobile phones: */\\n.el-input[data-v-4ccba1ba], .el-select[data-v-4ccba1ba], .el-radio[data-v-4ccba1ba] {\\n    width: 100%;\\n}\\n.el-radio[data-v-4ccba1ba] {\\n    margin-left: 0px !important;\\n}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 933:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_dynamic_HistoryGrid__ = __webpack_require__(934);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  components: {\n    HistoryGrid: __WEBPACK_IMPORTED_MODULE_1__components_dynamic_HistoryGrid__[\"a\" /* default */]\n  },\n  props: [\"data\"],\n  data: function data() {\n    var _this = this;\n\n    var user = JSON.parse(this.$getItemLocalStorage(this.$localStorageConstant.LoggedOnUser));\n    var isLeader = !this.$isMantisAdmin() && !this.$isMantisAdmin() && user.GroupRoles && user.GroupRoles.Leader && user.GroupRoles.Leader.indexOf(user.Project.GroupId) > -1;\n    var ruleForm = {};\n    if (this.data.item.Name != undefined) {\n      ruleForm = this.$Lodash.cloneDeep(this.data.item);\n      if (this.data.item.Assigned != undefined && !this.$Utils.equals(this.data.item.Assigned, '')) {\n        ruleForm.Assigned = this.data.item.Assigned.split(';').filter(function (item) {\n          return !_this.$Utils.equals(item, '');\n        });\n      } else {\n        ruleForm.Assigned = [];\n      }\n      ruleForm.autoCal = false;\n      ruleForm.oldName = this.data.item.Name + \"\";\n      ruleForm.IsPublic = ruleForm.IsPublic === '0' ? false : true;\n    } else {\n      ruleForm.Name = '';\n      ruleForm.Value = '';\n      ruleForm.TargetType = '';\n      ruleForm.IsPublic = true;\n      ruleForm.ActualStartDate = '';\n      ruleForm.ActualFinishDate = '';\n      ruleForm.Assigned = [];\n      ruleForm.ParentId = '';\n      ruleForm.Owner = '';\n      ruleForm.Plan = '';\n      ruleForm.Done = '';\n      ruleForm.Unit = '';\n      ruleForm.Progress = 0;\n      ruleForm.autoCal = true;\n      ruleForm.oldName = \"\";\n    }\n    return {\n      isShowAllTarget: false,\n      oldObject: this.$Lodash.cloneDeep(ruleForm),\n      typeLst: [{\n        \"Id\": \"1\",\n        \"Name\": \"Mục tiêu công ty\"\n      }, {\n        \"Id\": \"2\",\n        \"Name\": \"Mục tiêu phòng ban\"\n      }, {\n        \"Id\": \"3\",\n        \"Name\": \"Mục tiêu cá nhân\"\n      }],\n      ruleForm: ruleForm,\n      isLeader: isLeader,\n      dataCopied: this.$Lodash.cloneDeep(this.data),\n      viewHistoryModel: [],\n      rules: {\n        Name: [{ required: true, message: 'Tên bắt buộc phải điền', trigger: 'blur' }],\n        Value: [{ required: true, message: 'Phòng ban bắt buộc phải chọn', trigger: 'change' }],\n        ParentId: [{ required: true, message: 'Mục tiêu cha bắt buộc phải chọn', trigger: 'change' }]\n      }\n    };\n  },\n\n  watch: {},\n  methods: {\n    submitForm: function submitForm(formName) {\n      var ctrl = this;\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          ctrl.checkExits();\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    autoCal: function autoCal() {\n      if (this.ruleForm.autoCal == true) {\n        var tmp = Math.round(Number(this.ruleForm.Done) / Number(this.ruleForm.Plan) * 100);\n        this.ruleForm.Progress = isNaN(tmp) ? this.ruleForm.Progress : tmp;\n      }\n    },\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    close: function close() {\n      this.$hub.$emit('close-modal');\n    },\n    deleteTarget: function deleteTarget() {\n      var _this2 = this;\n\n      var ctrl = this;\n      this.$confirm('Mục tiêu sẽ bị xóa hoàn toàn. Tiếp tục?', 'Cảnh báo', {\n        confirmButtonText: 'Xóa',\n        cancelButtonText: 'Bỏ qua',\n        type: 'warning'\n      }).then(function () {\n        ctrl.recursiveDeleteTarget({ \"Id\": ctrl.data.item.Id, \"Level\": ctrl.data.item.Level });\n        ctrl.close();\n\n        var tRequest = _this2.$Utils.clone(_this2.$singleRequest);\n        tRequest.R1_RequestTemplate = \"AG_Task_Task.Search\";\n        tRequest.R1_RequestDataGroup = \"DataGroup.danh-sach-cong-viec.04b66\";\n        tRequest.R1_RequestFields = \"Id;Targets;TargetsName;\";\n        for (var i = 1; i <= eval(ctrl.data.item.Level - 5); i++) {\n          tRequest.R1_RequestFields += 'TargetsLevel' + i + \";\";\n        }\n        tRequest['R1_TargetsLevel' + [ctrl.model.Level - 5]] = ctrl.model.Id;\n        ctrl.$Utils.post(tRequest).then(function (response) {\n          response = ctrl.$Utils.getDataWithRoot(response.R1, 'Data.TasksDS.Task');\n          var updateRequest = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n          $.each(response, function (index, value) {\n            var fVal = {};\n            fVal.Id = ctrl.$Lodash.cloneDeep(value.Id);\n            fVal.Targets = \"\";\n            fVal.TargetsName = \"\";\n            fVal.RequestTemplate = \"AG_Task_Task.Update\";\n            fVal.RequestDataGroup = \"DataGroup.danh-sach-cong-viec.04b66\";\n            fVal.RequestFields = \"Id;Targets;TargetsName;\";\n            $.each(value.Targets.split(';'), function (key, val) {\n              if (key < eval(ctrl.data.item.Level - 6)) {\n                fVal.Targets += val + \";\";\n                fVal['TargetsLevel' + [key + 1]] = val;\n                fVal.RequestFields += 'TargetsLevel' + [key + 1] + \";\";\n              }\n            });\n            $.each(value.TargetsName.split(';'), function (key, val) {\n              if (key < eval(ctrl.data.item.Level - 6)) {\n                fVal.TargetsName += val + \";\";\n              }\n            });\n            updateRequest.TotalRequests = index + 1;\n            updateRequest = ctrl.$Utils.updateParamsSingleRequest(updateRequest, fVal, index + 1);\n          });\n          ctrl.$Utils.post(updateRequest);\n        });\n      }).catch(function () {});\n    },\n    recursiveDeleteTarget: function recursiveDeleteTarget(data) {\n      var ctrl = this;\n      if (ctrl.$Utils.isEmpty(data)) {\n        var request = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n        request.R1_RequestTemplate = \"Setting.Delete\";\n        request.R1_Id = data.Id;\n        ctrl.$Utils.post(request).then(function (dData) {\n          $.each(ctrl.data.targetLst, function (key, value) {\n            if (data.Id == value.ParentId) {\n              ctrl.recursiveDeleteTarget(value);\n            }\n          });\n          ctrl.data.getTargets();\n          ctrl.data.getObject();\n        });\n      };\n    },\n    loadHistory: function loadHistory(id) {\n      var ctrl = this;\n      var request = {\n        RequestAction: 'Request',\n        RequestClass: 'xBase',\n        TotalRequests: '1',\n        R1_RequestTemplate: 'ChangedLogs',\n        R1_Code: 'ChangedHistory',\n        R1_SourceId: id\n      };\n\n      var arrShowField = [];\n      arrShowField = ctrl.data.targetFields.filter(function (field) {\n        return field.History == 'true';\n      });\n\n      ctrl.$Utils.post(request).then(function (result) {\n        if (result.success && result.R1.success) {\n          var logData = ctrl.$Utils.getDataWithRoot(result, 'R1.Data.DataDS.Logs');\n\n          $.each(logData, function (k, log) {\n            try {\n              ctrl.viewHistoryModel.push({ type: 'head', value: log });\n              var logChanges = JSON.parse(log.Changes);\n              $.each(logChanges, function (k, change) {\n                if (arrShowField.length > 0 && change.ColumnName !== 'Assigned' && change.ColumnName !== 'Id') {\n                  if (change.ColumnName === \"ActualStartDate\" || change.ColumnName === \"ActualFinishDate\" || change.ColumnName === \"Created\") {\n                    var format = \"DD/MM/YYYY\";\n                    var date = ctrl.$Utils.stringToDate(change.OldDisplayValue);\n                    change.OldDisplayValue = log.Version === '1' ? \"\" : ctrl.$Utils.formatDateTime(date, format);\n                    date = ctrl.$Utils.stringToDate(change.NewDisplayValue);\n                    change.NewDisplayValue = ctrl.$Utils.formatDateTime(date, format);\n                  }\n                  if ((change.ColumnName === \"AssignedName\" && !change.OldDisplayValue && change.NewDisplayValue === \"\") == false) {\n                    arrShowField.forEach(function (field) {\n                      var object = { type: 'body', value: change };\n                      var checkField = field.DynamicText != undefined && field.DynamicText != '' ? field.DynamicText : field.Name;\n                      if (change.ColumnName == checkField) {\n                        if (change.ColumnName === 'TargetType') {\n                          ctrl.typeLst.filter(function (item) {\n                            if (item.Id === change.OldDisplayValue) change.OldDisplayValue = log.Version === '1' ? \"\" : item.Name;\n                            if (item.Id === change.NewDisplayValue) change.NewDisplayValue = item.Name;\n                          });\n                        } else if (change.ColumnName === 'IsPublic') {\n                          change.OldDisplayValue = log.Version === '1' ? \"\" : change.OldDisplayValue === '0' || change.OldDisplayValue == false ? 'Riêng tư' : 'Công khai';\n                          change.NewDisplayValue = change.NewDisplayValue === '0' || change.OldDisplayValue == false ? 'Riêng tư' : 'Công khai';\n                        }\n                        ctrl.viewHistoryModel.push(object);\n                      }\n                    });\n                  }\n                }\n              });\n            } catch (ex) {\n              console.log(ex);\n            }\n          });\n        }\n      });\n    },\n    checkExits: function checkExits() {\n      var ctrl = this;\n      var request = ctrl.$Lodash.cloneDeep(this.$singleRequest);\n      request.R1_RequestTemplate = 'xDynamicData_Setting.Search';\n      request.R1_RequestFields = 'Name;ParentId;';\n      request.R1_Name = ctrl.ruleForm.Name;\n      request.R1_RequestDataGroup = 'DataGroup.muc-tieu.091fb';\n      request.R1_ParentId = ctrl.ruleForm.Parent ? ctrl.ruleForm.Parent.Id : ctrl.ruleForm.ParentId;\n      ctrl.$Utils.post(request).then(function (data) {\n        var listExitsTar = ctrl.$Utils.getDataWithRoot(data.R1, 'Data.DynamicDS.Setting');\n        listExitsTar = listExitsTar.filter(function (el) {\n          return el.Name != ctrl.ruleForm.oldName;\n        });\n        if (listExitsTar.length != 0) {\n          ctrl.$message.error('Tên mục tiêu đã có');\n        } else {\n          ctrl.saveOrUpdate();\n        }\n      });\n    },\n    saveOrUpdate: function saveOrUpdate() {\n      var ctrl = this;\n\n      var request = ctrl.$Lodash.cloneDeep(this.$singleRequest);\n      if (!ctrl.ruleForm.Id) {\n        request.R1_RequestTemplate = 'xDynamicData_Setting.Insert';\n        request.R1_ReferenceId = ctrl.ruleForm.ParentId ? ctrl.ruleForm.ParentId : ctrl.data.rootId;\n        request.R1_NestedSetType = 'InsertLastChildNode';\n      } else {\n        request.R1_RequestTemplate = 'xDynamicData_Setting.Update';\n        request.R1_Id = ctrl.ruleForm.Id;\n      }\n      request.R1_RequestFields = 'Plan;Done;Progress;Unit;Assigned;AssignedName;Owner;OwnerName;TargetType;Id;Index;Code;Name;Value;Description;LeftIndex;ParentId;Level;Value;RightIndex;Created;CreatedBy;Modified;IsPublic;ActualStartDate;ActualFinishDate;ValueName';\n      request.R1_RequestDataGroup = 'DataGroup.muc-tieu.091fb';\n      request.R1_Name = ctrl.ruleForm.Name;\n      request.R1_Plan = ctrl.ruleForm.Plan;\n      request.R1_Done = ctrl.ruleForm.Done;\n      request.R1_Owner = ctrl.ruleForm.Owner;\n      request.R1_TargetType = ctrl.ruleForm.TargetType;\n      if (!isNaN(parseFloat(ctrl.ruleForm.Progress + ''))) {\n        request.R1_Progress = ctrl.ruleForm.Progress;\n      } else {\n        delete ctrl.ruleForm.Progress;\n      }\n      request.R1_Unit = ctrl.ruleForm.Unit;\n      request.R1_IsPublic = ctrl.ruleForm.IsPublic == true ? 1 : 0;\n      request.R1_Value = ctrl.ruleForm.Value;\n      $.each(ctrl.departmentLst, function (k, val) {\n        var res = val.GroupId !== ctrl.ruleForm.Value;\n        if (!res) {\n          request.R1_ValueName = val.GroupName;\n        }\n        return res;\n      });\n\n      request.R1_Assigned = \"\";\n      request.R1_AssignedName = \"\";\n      $.each(ctrl.ruleForm.Assigned, function (k, Id) {\n        request.R1_Assigned += Id + \";\";\n        ctrl.data.workers.filter(function (user) {\n          if (user.UserId && user.UserId === Id) {\n            request.R1_AssignedName += user.Username + ',';\n          }\n        });\n      });\n      ctrl.data.workers.filter(function (user) {\n        if (user.UserId && user.UserId === ctrl.ruleForm.Owner) {\n          request.R1_OwnerName = user.Username;\n        }\n      });\n      if (ctrl.$Utils.isEmpty(ctrl.ruleForm.ActualStartDate)) request.R1_ActualStartDate = ctrl.$Utils.formatDateTime(ctrl.ruleForm.ActualStartDate);\n      if (ctrl.$Utils.isEmpty(ctrl.ruleForm.ActualFinishDate)) request.R1_ActualFinishDate = ctrl.$Utils.formatDateTime(ctrl.ruleForm.ActualFinishDate);\n      ctrl.$Utils.post(request).then(function (data) {\n        ctrl.objectReturn = ctrl.$Lodash.cloneDeep(ctrl.ruleForm);\n        ctrl.objectReturn.Id = data.R1.Data;\n        if (ctrl.$Utils.isEmpty(ctrl.objectReturn, 'autoCals')) delete ctrl.objectReturn.autoCals;\n        if (ctrl.$Utils.isEmpty(ctrl.objectReturn, 'oldName')) delete ctrl.objectReturn.oldName;\n        ctrl.data.item = ctrl.$Lodash.cloneDeep(ctrl.objectReturn);\n        ctrl.objectReturn.AssignedName = request.R1_AssignedName;\n        ctrl.objectReturn.OwnerName = request.R1_OwnerName;\n        ctrl.objectReturn.Assigned = request.R1_Assigned;\n        ctrl.objectReturn.Value = request.R1_Value;\n        var arrChanged = ctrl.compareChange(ctrl.objectReturn, ctrl.oldObject);\n        if (ctrl.$Utils.isEmpty(arrChanged) && arrChanged.length > 0) {\n          if (request.R1_RequestTemplate, 'xDynamicData_Setting.Insert') {\n            ctrl.createHistoryLogs(arrChanged);\n          } else {\n            arrChanged = arrChanged.filter(function (ele) {\n              return ctrl.$Utils.isEmpty(ele.OldDisplayValue);\n            });\n            if (ctrl.$Utils.equals(arrChanged, []) == false) {\n              ctrl.createHistoryLogs(arrChanged);\n            }\n          }\n        }\n        var target = ctrl.$Lodash.cloneDeep(ctrl.ruleForm);\n        target.Id = data.R1.Data;\n        ctrl.saveOrUpdatePermissions(ctrl.ruleForm.oldName !== \"\", target);\n        ctrl.close();\n      });\n    },\n    compareChange: function compareChange(objReturn, objOld) {\n      var ctrl = this;\n      var arrChanged = [];\n      ctrl.objTemp = ctrl.$Lodash.cloneDeep(ctrl.oldObject);\n      $.each(objReturn, function (key, val) {\n        if (ctrl.$Utils.isEmpty(val)) {\n          var valueReturn = val;\n          var caption = \"\";\n          var field = {};\n          $.each(ctrl.data.targetFields, function (k, values) {\n            if (values.Name === key && values.History == \"true\") {\n              caption = values.Caption;\n              field = values;\n            }\n          });\n          var obj = {};\n\n          $.each(objOld, function (key1, value) {\n            if (key == key1 && ctrl.$Utils.equals(value, valueReturn) == false) {\n              obj[key1] = value;\n            }\n          });\n          var changedObject = {\n            ColumnCaption: caption,\n            ColumnName: key,\n            OldDisplayValue: obj[key],\n            OldValue: obj[key],\n            NewDisplayValue: objReturn[key] ? objReturn[key] : valueReturn,\n            NewValue: valueReturn\n          };\n          if (ctrl.$Utils.isEmpty(field)) {\n            switch (field.FieldColumnType) {\n              case 'DateTime':\n                if (ctrl.$Utils.stringToDate(val).getTime() == ctrl.$Utils.stringToDate(changedObject.OldValue).getTime()) {\n                  changedObject = undefined;\n                }\n                break;\n              case 'Double':\n                if (!ctrl.$Utils.isEmpty(ctrl.objTemp[key]) && ctrl.$Utils.isEmpty(objReturn[key])) {\n                  changedObject.OldDisplayValue = 0;\n                  changedObject.OldValue = 0;\n                }\n                break;\n              case 'Integer':\n                if (!ctrl.$Utils.isEmpty(ctrl.objTemp[key]) && ctrl.$Utils.isEmpty(objReturn[key])) {\n                  changedObject.OldDisplayValue = 0;\n                  changedObject.OldValue = 0;\n                }\n                break;\n            }\n          }\n\n          if (changedObject && ctrl.$Utils.isEmpty(caption) && caption != \"\") {\n            arrChanged.push(changedObject);\n          }\n        }\n      });\n      return arrChanged;\n    },\n    createHistoryLogs: function createHistoryLogs(arrChanged) {\n      var ctrl = this;\n      var countHistory = ctrl.$Utils.updateParamsSingleRequest(ctrl.$Lodash.cloneDeep(ctrl.$singleRequest), {\n        RequestTemplate: 'ChangedLogs.Count',\n        SourceId: ctrl.objectReturn.Id,\n        Code: 'ChangedHistory'\n      });\n\n      ctrl.$Utils.post(countHistory).then(function (result) {\n        if (ctrl.$Utils.isEmpty(result, 'R1.Data')) {\n          var insertRequest = ctrl.$Utils.updateParamsSingleRequest(countHistory, {\n            RequestTemplate: 'ChangedLogs.Insert',\n            Version: parseInt(result.R1.Data) + 1,\n            Changes: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(arrChanged),\n            CreatedByName: ctrl.$Utils.getUserInfo('Username')\n          });\n          ctrl.$Utils.post(insertRequest).then(function (insertResult) {});\n        }\n      });\n    },\n    saveOrUpdatePermissions: function saveOrUpdatePermissions(isUpdate, target) {\n      var ctrl = this;\n\n      var req = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n      if (isUpdate == true) {\n        var paramsSearchLinked = {\n          RequestAction: 'SearchLinked',\n          RequestClass: 'Addition',\n          ConditionFields: 'Parent;',\n          StaticFields: 'Code;Child;Parent;Name;Created;Description',\n          OrderFields: 'Created DESC',\n          Parent: target.Id\n        };\n        ctrl.$Utils.post(paramsSearchLinked).then(function (result) {\n          if (result.TotalCount > 0) {\n            var arrLink = result.TotalCount == 1 ? [result.Data.DataDS.Linked] : result.Data.DataDS.Linked;\n            var removeLinks = {\n              RequestClass: 'xBase',\n              RequestAction: 'Request',\n              TotalRequests: arrLink.length,\n              RequestTemplate: 'Permission.Remove'\n            };\n            $.each(arrLink, function (link, key) {\n              removeLinks['R' + (key + 1) + '_Id'] = link.Id;\n            });\n            ctrl.savePermission(target, removeLinks);\n          }\n        });\n      } else {\n        ctrl.savePermission(target);\n      }\n    },\n    savePermission: function savePermission(target, removeLinks) {\n      var ctrl = this;\n      if (target.IsPublic == true) {\n        ctrl.$Utils.linkToRoleEveryone([{\n          Id: target.Id,\n          Caption: target.Name\n        }]);\n\n        ctrl.data.getTargets();\n        ctrl.data.getObject();\n      } else {\n        var permissons = [];\n        var leaders = [];\n        var groups = [];\n        groups.push(target.Value);\n        if (groups && groups.length > 0) {\n          var req = {};\n          groups.filter(function (gro, key) {\n            req['R' + ctrl.ix + '_RequestTemplate'] = 'OrgnizationList';\n            req['R' + ctrl.ix + '_GroupName'] = 'Leader';\n            req['R' + ctrl.ix + '_GroupParent'] = gro.GroupId;\n            req['R' + ctrl.ix + '_RequestDataType'] = 'json';\n            req['R' + ctrl.ix + '_GroupType'] = '2';\n            ctrl.ix++;\n          });\n          req.TotalRequests = ctrl.ix - 1;\n          req.RequestClass = 'xBase';\n          req.RequestAction = 'Request';\n          ctrl.$Utils.post(req).then(function (data1) {\n            for (var k = 1; k < ctrl.ix; k++) {\n              var ele = ctrl.$Utils.getDataWithRoot(data1, 'R' + k + '.Data.UserDS.Group');\n              if (ele[0] != undefined) {\n                if (ele[0].GroupName === 'Leader') {\n                  leaders = leaders.concat(ele);\n                }\n              }\n            }\n            var strLeaders = '';\n            leaders.filter(function (ele, key) {\n              if (ele.GroupParent == groups[0].GroupId) {\n                strLeaders += ele.GroupId + ';';\n                if (target.TargetType == '2' || target.TargetType == '1') {\n                  var p = {\n                    Parrent: target.Id,\n                    Code: 'Edit',\n                    Name: target.Name + ' - Edit',\n                    Child: ele.GroupId,\n                    ChildTable: 'tblGroup'\n                  };\n                  permissons.push(p);\n                } else if (target.TargetType == '3') {\n                  var p1 = {\n                    Parrent: target.Id,\n                    Code: 'Manage',\n                    Name: target.Name + ' - Manage',\n                    Child: ele.GroupId,\n                    ChildTable: 'tblGroup'\n                  };\n                  permissons.push(p1);\n                }\n              }\n            });\n            if (target.Owner && strLeaders.indexOf(target.Owner) == -1) {\n              var p = {\n                Parrent: target.Id,\n                Code: 'Edit',\n                Name: target.Name + ' - Edit',\n                Child: target.Owner,\n                ChildTable: 'tblUser'\n              };\n              permissons.push(p);\n            }\n            if (target.Assigned) {\n              target.Assigned.filter(function (user, key) {\n                if (user !== '' && strLeaders.indexOf(user) == -1) {\n                  var p = {\n                    Parrent: target.Id,\n                    Code: 'Edit',\n                    Name: target.Name + ' - Edit',\n                    Child: user,\n                    ChildTable: 'tblUser'\n                  };\n                  permissons.push(p);\n                }\n              });\n            }\n\n            var p10 = {\n              Parrent: target.Id,\n              Code: 'Manage',\n              Name: target.Name + ' - Manage',\n              Child: ctrl.$administrator,\n              ChildTable: 'tblGroup'\n            };\n            permissons.push(p10);\n            var p11 = {\n              Parrent: target.Id,\n              Code: 'Manage',\n              Name: target.Name + ' - Manage',\n              Child: ctrl.$supervisor,\n              ChildTable: 'tblGroup'\n            };\n            permissons.push(p11);\n\n            var persReadyToInsert = {};\n            var index = 1;\n            permissons.filter(function (p, k) {\n              persReadyToInsert['R' + index + '_RequestClass'] = 'xBase';\n              persReadyToInsert['R' + index + '_RequestAction'] = 'LinkUserToObject';\n              persReadyToInsert['R' + index + '_ParentTable'] = 'xObject';\n              persReadyToInsert['R' + index + '_RequestTemplate'] = 'Permission.Insert';\n              persReadyToInsert['R' + index + '_Parent'] = p.Parrent;\n              persReadyToInsert['R' + index + '_Child'] = p.Child;\n              persReadyToInsert['R' + index + '_Code'] = p.Code;\n              persReadyToInsert['R' + index + '_Name'] = p.Name;\n              persReadyToInsert['R' + index + '_ChildTable'] = p.ChildTable;\n              index++;\n            });\n            persReadyToInsert.TotalRequests = permissons.length;\n            persReadyToInsert.RequestClass = 'xBase';\n            persReadyToInsert.RequestAction = 'Request';\n            if (removeLinks == undefined) {\n              ctrl.$Utils.post(persReadyToInsert).then(function (data3) {\n                ctrl.data.getObject();\n                ctrl.data.getTargets();\n              });\n            } else {\n              ctrl.$Utils.post(removeLinks).then(function (data2) {\n                ctrl.$Utils.post(persReadyToInsert).then(function (data3) {\n                  ctrl.data.getTargets();\n                  ctrl.data.getObject();\n                });\n              });\n            }\n          });\n        }\n      }\n    },\n    changeEditState: function changeEditState() {\n      this.data.disabled = !this.data.disabled;\n    },\n    changeType: function changeType(type) {\n      this.dataCopied.targetLst = this.data.targetLst.filter(function (ele) {\n        return ele != undefined && eval(type) - 1 + \"\" === ele.TargetType;\n      });\n      this.$set(this.dataCopied, 'targetFullLst', this.data.targetSavedLst.filter(function (ele) {\n        return ele != undefined && eval(type) - 1 + \"\" === ele.TargetType;\n      }));\n    },\n    setParent: function setParent(parent) {\n      var ctrl = this;\n      if (ctrl.ruleForm.TargetType == 3) {\n        $.each(ctrl.departmentLst, function (k, group) {\n          if (ctrl.$Utils.isEmpty(parent) && group.GroupId == parent) {\n            ctrl.ruleForm.Value = group;\n          }\n        });\n      }\n    }\n  },\n  created: function created() {\n    var ctrl = this;\n    if (ctrl.ruleForm.Id) {\n      ctrl.loadHistory(ctrl.ruleForm.Id);\n      ctrl.changeType(ctrl.ruleForm.TargetType);\n      if (ctrl.ruleForm.IsPublic == undefined) {\n        ctrl.ruleForm.IsPublic = true;\n      }\n      $.each(ctrl.data.targetLst, function (k, v) {\n        if (ctrl.ruleForm.Id === v.Id) {\n          ctrl.ruleForm.Permission = v.Permission;\n          return false;\n        }\n      });\n    } else {\n      ctrl.ruleForm.Permission = 'Edit';\n      if (ctrl.isLeader) {\n        ctrl.ruleForm.TargetType = ctrl.typeLst[2].Id;\n        ctrl.changeType(ctrl.typeLst[2].Id);\n      } else {\n        ctrl.ruleForm.TargetType = ctrl.typeLst[0].Id;\n        ctrl.changeType(ctrl.typeLst[0].Id);\n      }\n      ctrl.ruleForm.IsPublic = true;\n    }\n    var user = JSON.parse(ctrl.$getItemLocalStorage(ctrl.$localStorageConstant.LoggedOnUser));\n    if (user.LoginName !== 'superadmin') {\n      ctrl.data.workers = ctrl.data.workers.filter(function (el) {\n        return el.LoginName && el.LoginName.indexOf('superadmin') === -1;\n      });\n    }\n  }\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(2)))\n\n/***/ }),\n\n/***/ 934:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_HistoryGrid_vue__ = __webpack_require__(937);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_73377d6a_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_HistoryGrid_vue__ = __webpack_require__(938);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(935)\n}\nvar normalizeComponent = __webpack_require__(1)\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_HistoryGrid_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_73377d6a_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_HistoryGrid_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 935:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(936);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(876)(\"dd1e798e\", content, true);\n\n/***/ }),\n\n/***/ 936:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(875)(true);\n// imports\n\n\n// module\nexports.push([module.i, \"#history-grid th{text-align:center!important}#history-grid td,#history-grid th,#history-grid tr{border:thin solid #d3d3d3}\", \"\", {\"version\":3,\"sources\":[\"D:/projects/bos/vuejs/src/components/dynamic/HistoryGrid.vue\"],\"names\":[],\"mappings\":\"AACA,iBACE,2BAA8B,CAE/B,AACD,mDAFE,yBAA6B,CAI9B\",\"file\":\"HistoryGrid.vue\",\"sourcesContent\":[\"\\n#history-grid th {\\n  text-align: center !important;\\n  border: solid thin lightgray;\\n}\\n#history-grid tr, #history-grid td {\\n  border: solid thin lightgray;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 937:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: [\"dtSource\", \"dtHeader\"],\n  methods: {},\n  data: function data() {\n    return {};\n  }\n});\n\n/***/ }),\n\n/***/ 938:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{staticClass:\"box-card\",attrs:{\"id\":\"history-grid\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"Lịch sử\")])]),_vm._v(\" \"),_c('div',{staticClass:\"el-table__body-wrapper is-scroll-left\"},[_c('table',{staticStyle:{\"width\":\"100%\"}},[_c('thead',{staticClass:\"positive-bg light text-bold\"},[_c('tr',_vm._l((_vm.dtHeader),function(h){return _c('th',[_vm._v(_vm._s(h))])}))]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.dtSource),function(itemLog){return _c('tr',{style:({'background-color': itemLog.type=='body'? '#e4e5e6' : '#fff'})},[(itemLog.type=='head')?_c('td',{staticClass:\"success\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"\\n          v.\"+_vm._s(itemLog.value.Version + '.0 ')),_c('strong',[_vm._v(_vm._s(itemLog.value.CreatedByName))]),_vm._v(\", \"+_vm._s(_vm.$Utils.formatDateTime(itemLog.value.Created,'DD-MM-YYYY HH:mm'))+\"\\n        \")]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.ColumnCaption))]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.OldDisplayValue))]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.NewDisplayValue))]):_vm._e()])}))])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ 939:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(\"Thông tin mục tiêu\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"}},[(_vm.data.disabled==false && _vm.ruleForm.Permission && _vm.ruleForm.Permission !=='View' )?_c('el-button',{attrs:{\"icon\":\"fa fa-save\"},on:{\"click\":function($event){_vm.submitForm('ruleForm')}}}):_vm._e(),_vm._v(\" \"),(_vm.data.disabled==true && _vm.ruleForm.Permission && _vm.ruleForm.Permission !=='View' )?_c('el-button',{attrs:{\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.changeEditState}}):_vm._e(),_vm._v(\" \"),(_vm.data.isEditable==true && _vm.data.item.Permission ==undefined )?_c('el-button',{attrs:{\"icon\":\"fa fa-eraser\"},on:{\"click\":function($event){_vm.resetForm('ruleForm')}}}):_vm._e(),_vm._v(\" \"),(_vm.ruleForm.Permission && _vm.ruleForm.Permission ==='Manage')?_c('el-button',{attrs:{\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){_vm.deleteTarget()}}}):_vm._e()],1)]),_vm._v(\" \"),_c('div',[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-position\":_vm.$isMobileDevice?'top':'right',\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"Tên:\",\"prop\":\"Name\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Name\", $$v)},expression:\"ruleForm.Name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Hiển thị:\",\"prop\":\"IsPublic\"}},[_c('el-switch',{staticStyle:{\"display\":\"block\"},attrs:{\"disabled\":_vm.data.disabled,\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\",\"active-text\":\"Công khai\",\"inactive-text\":\"Riêng tư\"},model:{value:(_vm.ruleForm.IsPublic),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"IsPublic\", $$v)},expression:\"ruleForm.IsPublic\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"demo-form-inline\",attrs:{\"label\":\"Thời gian:\",\"prop\":\"startEndDate\"}},[_c('el-date-picker',{attrs:{\"format\":\"dd-MM-yyyy\",\"disabled\":_vm.data.disabled,\"type\":\"date\",\"placeholder\":\"Bắt đầu\"},model:{value:(_vm.ruleForm.ActualStartDate),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ActualStartDate\", $$v)},expression:\"ruleForm.ActualStartDate\"}}),_vm._v(\" \"),_c('el-date-picker',{attrs:{\"format\":\"dd-MM-yyyy\",\"disabled\":_vm.data.disabled,\"type\":\"date\",\"placeholder\":\"Kết thúc\"},model:{value:(_vm.ruleForm.ActualFinishDate),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ActualFinishDate\", $$v)},expression:\"ruleForm.ActualFinishDate\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Loại mục tiêu:\",\"prop\":\"TargetType\"}},[_c('el-radio-group',{attrs:{\"disabled\":!_vm.data.isEditable},on:{\"change\":function($event){_vm.changeType(_vm.ruleForm.TargetType)}},model:{value:(_vm.ruleForm.TargetType),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"TargetType\", $$v)},expression:\"ruleForm.TargetType\"}},_vm._l((_vm.typeLst),function(t){return _c('el-radio',{key:t.Id,attrs:{\"size\":\"mini\",\"label\":t.Id,\"border\":\"\",\"ng-show\":\"data.disabled?true:(t.Id ===ruleForm.TargetType) \"}},[_vm._v(_vm._s(t.Name))])}))],1),_vm._v(\" \"),(_vm.dataCopied.targetLst.length !=undefined && _vm.ruleForm.TargetType!=='1' )?_c('el-form-item',{attrs:{\"label\":\"Mục tiêu cha:\",\"prop\":\"ParentId\"}},[(_vm.isShowAllTarget)?_c('el-select',{attrs:{\"placeholder\":\"--Chọn--\",\"disabled\":_vm.ruleForm.Id!==undefined},on:{\"change\":function($event){_vm.setParent(_vm.ruleForm.ParentId)}},model:{value:(_vm.ruleForm.ParentId),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ParentId\", $$v)},expression:\"ruleForm.ParentId\"}},_vm._l((_vm.dataCopied.targetFullLst),function(t){return _c('el-option',{key:t.Id,attrs:{\"label\":t.Name,\"value\":t.Id}})})):_c('el-select',{attrs:{\"placeholder\":\"--Chọn--\",\"disabled\":!_vm.data.isEditable},on:{\"change\":function($event){_vm.setParent(_vm.ruleForm.ParentId)}},model:{value:(_vm.ruleForm.ParentId),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ParentId\", $$v)},expression:\"ruleForm.ParentId\"}},_vm._l((_vm.dataCopied.targetLst),function(t){return _c('el-option',{key:t.Id,attrs:{\"label\":t.Name,\"value\":t.Id}})})),_vm._v(\"\\n             \\n          \"),(_vm.ruleForm.Id===undefined)?_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"Bộ lọc thời gian sẽ ảnh hưởng tới số lượng mục tiêu cha hiển thị. Để hiển thị tất cả mục tiêu, hãy chọn 'Hiển thị tất cả'\",\"placement\":\"top\"}},[_c('i',{staticClass:\"fa fa-lg fa-info-circle\"})]):_vm._e(),_vm._v(\"\\n             \\n          \"),(_vm.ruleForm.Id===undefined)?_c('el-checkbox',{attrs:{\"label\":\"Hiển thị tất cả\"},model:{value:(_vm.isShowAllTarget),callback:function ($$v) {_vm.isShowAllTarget=$$v},expression:\"isShowAllTarget\"}}):_vm._e()],1):_vm._e(),_vm._v(\" \"),(_vm.data.departmentLst.length >0)?_c('el-form-item',{attrs:{\"label\":\"Thuộc phòng ban:\",\"prop\":\"Value\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Value),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Value\", $$v)},expression:\"ruleForm.Value\"}},_vm._l((_vm.data.departmentLst),function(t){return _c('el-option',{key:t.GroupId,attrs:{\"label\":t.GroupName,\"value\":t.GroupId}})}))],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Quản lý:\",\"prop\":\"Owner\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Owner),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Owner\", $$v)},expression:\"ruleForm.Owner\"}},_vm._l((_vm.data.workers),function(t){return (t.UserId.indexOf(';') == -1)?_c('el-option',{key:t.UserId,attrs:{\"label\":t.Username,\"value\":t.UserId}}):_vm._e()}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Nhân sự thực hiện:\",\"prop\":\"Assigned\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"multiple\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Assigned),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Assigned\", $$v)},expression:\"ruleForm.Assigned\"}},_vm._l((_vm.data.workers),function(t){return _c('el-option',{key:t.UserId,attrs:{\"label\":t.Username,\"value\":t.UserId}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"KPIs kế hoạch:\",\"prop\":\"Plan\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.Plan),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Plan\", $$v)},expression:\"ruleForm.Plan\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"KPIs đạt:\",\"prop\":\"Done\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.Done),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Done\", $$v)},expression:\"ruleForm.Done\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Đơn vị tính:\",\"prop\":\"Unit\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Unit),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Unit\", $$v)},expression:\"ruleForm.Unit\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Tính % Hoàn thành:\",\"prop\":\"autoCal\"}},[_c('el-switch',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.autoCal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"autoCal\", $$v)},expression:\"ruleForm.autoCal\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Tỉ lệ hoành thành:\",\"prop\":\"Progress\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Progress),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Progress\", $$v)},expression:\"ruleForm.Progress\"}})],1)],1)],1)]),_vm._v(\" \"),(!_vm.data.isEditable)?_c('HistoryGrid',{attrs:{\"dtSource\":_vm.viewHistoryModel,\"dtHeader\":['Mục', 'Giá trị cũ', 'Giá trị mới']}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ 940:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"tTbl\"}},[_c('div',{staticStyle:{\"flex\":\"1\",\"display\":\"flex\",\"align-items\":\"center\",\"justify-content\":\"space-between\",\"font-size\":\"14px\",\"padding-right\":\"8px\"}},[_c('el-row'),_vm._v(\" \"),(_vm.editableUser)?_c('el-tooltip',{attrs:{\"content\":\"Thêm mới mục tiêu\",\"placement\":\"top\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"fa fa-plus\"},on:{\"click\":function($event){_vm.addNewTarget()}}})],1):_vm._e()],1),_vm._v(\" \"),_c('el-table',{attrs:{\"data\":_vm.dtSrc,\"border\":\"\",\"empty-text\":\"Không có dữ liệu\"}},[_c('el-table-column',{attrs:{\"label\":\"\",\"width\":\"50px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticStyle:{\"text-align\":\"center\",\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.openTargetDetail(scope.row)}}},[_c('i',{staticClass:\"fa-lg icon-magnifier-add\"})])]}}])}),_vm._v(\" \"),_c('el-table-tree-column',{attrs:{\"prop\":\"Name\",\"label\":\"Tên\",\"levelKey\":\"level\",\"treeKey\":\"Id\",\"parentKey\":\"ParentId\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Progress\",\"label\":\"Hoàn thành\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-progress',{attrs:{\"text-inside\":true,\"stroke-width\":18,\"percentage\":Math.round(isNaN(scope.row.Progress)?0:scope.row.Progress)}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"TargetType\",\"label\":\"Loại\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(_vm.targetsObj[scope.row.TargetType]?_vm.targetsObj[scope.row.TargetType].Name:'---')+\"\\n      \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Plan\",\"label\":\"Kế hoạch\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Done\",\"label\":\"Đạt được\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Unit\",\"label\":\"Đơn vị\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Unit\",\"label\":\"Người quản lý\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[(_vm.userWithAvatarLst[scope.row.Owner]!=undefined)?_c('img',{staticClass:\"avatar\",staticStyle:{\"margin\":\"8px 10px 0 0\"},attrs:{\"height\":\"35\",\"width\":\"35\",\"title\":_vm.userWithAvatarLst[scope.row.Owner].Username,\"src\":_vm.loadAvatar(_vm.userWithAvatarLst[scope.row.Owner].Avatar)}}):_vm._e(),_vm._v(\" \"),(_vm.userWithAvatarLst[scope.row.Owner]==undefined)?_c('span',[_vm._v(_vm._s(scope.row.OwnerName))]):_vm._e()])]}}])})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/8.05d1cb7c42fe8068275e.js","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4695fe4e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TargetSetting.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TargetSetting.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4695fe4e\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TargetSetting.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/static/TargetSetting.vue\n// module id = 879\n// module chunks = 2 8","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4ccba1ba\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TargetDialog.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TargetDialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4ccba1ba\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TargetDialog.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4ccba1ba\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/static/TargetDialog.vue\n// module id = 919\n// module chunks = 2 8","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4695fe4e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./TargetSetting.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"4909c504\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-4695fe4e\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/static/TargetSetting.vue\n// module id = 928\n// module chunks = 2 8","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"#tTbl #plusBtn{position:fixed;top:120px;right:30px;z-index:99;cursor:pointer}\", \"\", {\"version\":3,\"sources\":[\"D:/projects/bos/vuejs/src/components/static/TargetSetting.vue\"],\"names\":[],\"mappings\":\"AACA,eACE,eAAgB,AAChB,UAAW,AACX,WAAY,AACZ,WAAY,AACZ,cAAgB,CACjB\",\"file\":\"TargetSetting.vue\",\"sourcesContent\":[\"\\n#tTbl #plusBtn {\\n  position: fixed;\\n  top: 120px;\\n  right: 30px;\\n  z-index: 99;\\n  cursor: pointer;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-4695fe4e\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/static/TargetSetting.vue\n// module id = 929\n// module chunks = 2 8","<template>\n  <div id=\"tTbl\" >\n    <div style=\"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;\">\n      <el-row>\n      </el-row>\n      <el-tooltip content=\"Thêm mới mục tiêu\" placement=\"top\" v-if=\"editableUser\">\n        <el-button size=\"mini\" icon=\"fa fa-plus\" v-on:click=\"addNewTarget()\"></el-button>\n      </el-tooltip>\n    </div>\n    <el-table :data=\"dtSrc\" border empty-text=\"Không có dữ liệu\">\n      <el-table-column label=\"\" width=\"50px\">\n        <template slot-scope=\"scope\">\n          <div style=\"text-align: center;cursor: pointer\" @click=\"openTargetDetail(scope.row)\">\n            <i class=\"fa-lg icon-magnifier-add\" ></i>\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-tree-column prop=\"Name\" label=\"Tên\" levelKey=\"level\" treeKey=\"Id\" parentKey=\"ParentId\"></el-table-tree-column>\n      <el-table-column prop=\"Progress\" label=\"Hoàn thành\" :show-overflow-tooltip=\"true\" >\n        <template slot-scope=\"scope\">\n          <el-progress :text-inside=\"true\" :stroke-width=\"18\" :percentage=\"Math.round(isNaN(scope.row.Progress)?0:scope.row.Progress)\"></el-progress>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"TargetType\" label=\"Loại\" :show-overflow-tooltip=\"true\" >\n        <template slot-scope=\"scope\">\n          {{targetsObj[scope.row.TargetType]?targetsObj[scope.row.TargetType].Name:'---'}}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"Plan\" label=\"Kế hoạch\" :show-overflow-tooltip=\"true\" ></el-table-column>\n      <el-table-column prop=\"Done\" label=\"Đạt được\" :show-overflow-tooltip=\"true\" ></el-table-column>\n      <el-table-column prop=\"Unit\" label=\"Đơn vị\" :show-overflow-tooltip=\"true\" ></el-table-column>\n      <el-table-column prop=\"Unit\" label=\"Người quản lý\" :show-overflow-tooltip=\"true\" >\n        <template slot-scope=\"scope\">\n          <div>\n            <img v-if=\"userWithAvatarLst[scope.row.Owner]!=undefined\" class = 'avatar' style='margin: 8px 10px 0 0;' height='35' width='35' :title=\"userWithAvatarLst[scope.row.Owner].Username\"\n                 :src=\"loadAvatar(userWithAvatarLst[scope.row.Owner].Avatar)\" />\n            <span v-if=\"userWithAvatarLst[scope.row.Owner]==undefined\">{{scope.row.OwnerName}}</span>\n          </div>\n        </template>\n      </el-table-column>\n    </el-table>\n\n\n  </div>\n\n</template>\n\n<script>\n  import Vue from 'vue'\n  import ElTableTreeColumn from  'element-tree-grid/src/index.js';\n  import ElTreeGrid from 'element-tree-grid';\n  import TargetDialog from '@/components/static/TargetDialog'\n  Vue.use(require('vue-moment'));\n  export default {\n    props:[\"targetLst\", \"options\", \"typeLst\", \"workerLst\", \"departmentLst\", \"targetFieldLst\", \"getTargets\", \"getObject\", \"rootId\", \"targetSavedLst\"],\n    components:{ElTreeGrid,ElTableTreeColumn},\n    data() {\n      return {\n        dtSrc:[],\n        userWithAvatarLst: [],\n        editableUser: false\n      }\n    },\n    methods: {\n      loadAvatar(avatar){\n       if(avatar == undefined) avatar = 'assets/images/avatars/profile.png';\n       avatar = avatar.replace('profile.jpg', 'profile.png');\n                var strAvatar =\n                  avatar === \"assets/images/avatars/profile.png\"\n                    ? this.$appUri.BaseURL + avatar\n                    : this.$appUri.BaseURL + avatar.replace('/','') + \"&Height=50&Width=50\";\n      return strAvatar;\n     },\n      openTargetDetail(row){\n        var dataToPass = {\n          item: row,\n          workers: this.workerLst,\n          // departments:this.departmentLst,\n          isEditable:false,\n          targetLst:this.targetLst,\n          departmentLst:this.departmentLst,\n          disabled:true,\n          targetFields:JSON.parse(this.targetFieldLst),\n          getTargets:this.getTargets,\n          getObject:this.getObject,\n          targetSavedLst:this.targetSavedLst,\n        };\n        this.$hub.$emit(\n          \"set-modal-data\",\n          \"\",\n          \"50%\",\n          true,\n          \"center\",\n          TargetDialog,\n          false,\n          \"\",\n          dataToPass,\n          true\n        );\n        this.$hub.$emit(\"open-modal\");\n      },\n      addNewTarget(){\n        if(this.targetFieldLst && this.targetFieldLst.constructor != Array) return;\n        var dataToPass = {item: {},\n          workers: this.workerLst,\n          departments:this.departmentLst,\n          isEditable:true,\n          targetLst:this.targetLst,\n          departmentLst:this.departmentLst,\n          disabled:false,\n          targetFields:JSON.parse(this.targetFieldLst),\n          rootId:this.rootId,\n          getTargets:this.getTargets,\n          getObject:this.getObject,\n          targetSavedLst:this.targetSavedLst,\n        };\n        this.$hub.$emit(\n          \"set-modal-data\",\n          \"\",\n          \"50%\",\n          true,\n          \"center\",\n          TargetDialog,\n          false,\n          \"\",\n          dataToPass,\n          false\n        );\n        this.$hub.$emit(\"open-modal\");\n      },\n    },\n    watch: {\n      targetLst: function(val){\n          this.dtSrc = this.$Utils.treeify(val, this.options.key, this.options.parentKey, 'level');\n      },\n    },\n    created(){\n      this.userWithAvatarLst = this.$Utils.rotateDementionArr(this.workerLst, 'UserId');\n      this.targetsObj = this.$Utils.rotateDementionArr(this.typeLst, 'Id');\n      this.dtSrc = this.$Utils.treeify(this.targetLst, this.options.key, this.options.parentKey, 'level');\n      var user = JSON.parse(this.$getItemLocalStorage(this.$localStorageConstant.LoggedOnUser));\n      if (this.$isSystemAdmin() || this.$isMantisAdmin()) {\n        this.editableUser = true;\n      } else if (user.GroupRoles) {\n        if (\n          (user.GroupRoles.Leader && user.GroupRoles.Leader.indexOf(user.Project.GroupId) > -1) ||\n          (user.GroupRoles.Director && user.GroupRoles.Director.indexOf(user.Project.GroupId) > -1)\n        ) {\n          this.editableUser = true;\n        }\n      } else {\n        this.editableUser = false;\n      }\n    },\n  };\n</script>\n\n<style lang=\"scss\">\n  #tTbl {\n    #plusBtn {\n      position: fixed;\n      top: 120px;\n      right: 30px;\n      z-index: 99;\n      cursor: pointer;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/static/TargetSetting.vue","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4ccba1ba\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./TargetDialog.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"46a499d8\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-4ccba1ba\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/static/TargetDialog.vue\n// module id = 931\n// module chunks = 2 8","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"@media only screen and (max-width:768px){.el-input[data-v-4ccba1ba],.el-radio[data-v-4ccba1ba],.el-select[data-v-4ccba1ba]{width:100%}.el-radio[data-v-4ccba1ba]{margin-left:0!important}}\", \"\", {\"version\":3,\"sources\":[\"D:/projects/bos/vuejs/src/components/static/TargetDialog.vue\"],\"names\":[],\"mappings\":\"AACA,yCAEA,kFACI,UAAY,CACf,AACD,2BACI,uBAA4B,CAC/B,CACA\",\"file\":\"TargetDialog.vue\",\"sourcesContent\":[\"\\n@media only screen and (max-width: 768px) {\\n  /* For mobile phones: */\\n.el-input[data-v-4ccba1ba], .el-select[data-v-4ccba1ba], .el-radio[data-v-4ccba1ba] {\\n    width: 100%;\\n}\\n.el-radio[data-v-4ccba1ba] {\\n    margin-left: 0px !important;\\n}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-4ccba1ba\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/static/TargetDialog.vue\n// module id = 932\n// module chunks = 2 8","<template>\n  <div>\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span style=\"float: left;\">Thông tin mục tiêu</span>\n        <div style=\"float: right; padding: 3px 0\">\n          <el-button v-if=\"data.disabled==false && ruleForm.Permission && ruleForm.Permission !=='View' \" @click=\"submitForm('ruleForm')\" icon=\"fa fa-save\"/>\n          <el-button v-if=\"data.disabled==true && ruleForm.Permission && ruleForm.Permission !=='View' \" @click=\"changeEditState\" icon=\"el-icon-edit\"/>\n          <el-button v-if=\"data.isEditable==true && data.item.Permission ==undefined \" @click=\"resetForm('ruleForm')\" icon=\"fa fa-eraser\"/>\n          <el-button v-if=\"ruleForm.Permission && ruleForm.Permission ==='Manage'\" @click=\"deleteTarget()\" icon=\"el-icon-delete\"/>\n        </div>\n      </div>\n      <div>\n        <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" :label-position=\"$isMobileDevice?'top':'right'\" label-width=\"150px\">\n          <el-form-item label=\"Tên:\" prop=\"Name\" >\n            <el-input v-model=\"ruleForm.Name\" :disabled=\"data.disabled\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"Hiển thị:\" prop=\"IsPublic\">\n            <el-switch :disabled=\"data.disabled\" style=\"display: block\" v-model=\"ruleForm.IsPublic\" active-color=\"#13ce66\"\n                       inactive-color=\"#ff4949\" active-text=\"Công khai\" inactive-text=\"Riêng tư\">\n            </el-switch>\n          </el-form-item>\n          <el-form-item label=\"Thời gian:\" prop=\"startEndDate\" class=\"demo-form-inline\">\n            <el-date-picker format = \"dd-MM-yyyy\" :disabled=\"data.disabled\" v-model=\"ruleForm.ActualStartDate\"\n                            type=\"date\" placeholder=\"Bắt đầu\">\n            </el-date-picker>\n            <el-date-picker format = \"dd-MM-yyyy\" :disabled=\"data.disabled\"\n                            v-model=\"ruleForm.ActualFinishDate\" type=\"date\" placeholder=\"Kết thúc\">\n            </el-date-picker>\n          </el-form-item>\n          <el-form-item label=\"Loại mục tiêu:\" prop=\"TargetType\" >\n            <el-radio-group v-model=\"ruleForm.TargetType\" :disabled=\"!data.isEditable\" @change=\"changeType(ruleForm.TargetType)\">\n              <el-radio size=\"mini\" v-for=\"t in typeLst\" :label=\"t.Id\" :key=\"t.Id\" border ng-show=\"data.disabled?true:(t.Id ===ruleForm.TargetType) \">{{t.Name}}</el-radio>\n            </el-radio-group>\n          </el-form-item>\n          <el-form-item label=\"Mục tiêu cha:\" prop=\"ParentId\" v-if=\"dataCopied.targetLst.length !=undefined && ruleForm.TargetType!=='1' \">\n            <el-select v-if=\"isShowAllTarget\" v-model=\"ruleForm.ParentId\" placeholder=\"--Chọn--\"  :disabled=\"ruleForm.Id!==undefined\" @change=\"setParent(ruleForm.ParentId)\">\n              <el-option v-for=\"t in dataCopied.targetFullLst\" :key=\"t.Id\" :label=\"t.Name\" :value=\"t.Id\"/>\n            </el-select>\n            <el-select v-else v-model=\"ruleForm.ParentId\" placeholder=\"--Chọn--\"  :disabled=\"!data.isEditable\" @change=\"setParent(ruleForm.ParentId)\">\n              <el-option v-for=\"t in dataCopied.targetLst\" :key=\"t.Id\" :label=\"t.Name\" :value=\"t.Id\"/>\n            </el-select>\n            &nbsp;&nbsp;&nbsp;\n            <el-tooltip v-if=\"ruleForm.Id===undefined\" class=\"item\" effect=\"dark\" content=\"Bộ lọc thời gian sẽ ảnh hưởng tới số lượng mục tiêu cha hiển thị. Để hiển thị tất cả mục tiêu, hãy chọn 'Hiển thị tất cả'\" placement=\"top\">\n              <i class=\"fa fa-lg fa-info-circle\"></i>\n            </el-tooltip>\n            &nbsp;&nbsp;&nbsp;\n            <el-checkbox  v-if=\"ruleForm.Id===undefined\" label=\"Hiển thị tất cả\" v-model=\"isShowAllTarget\"></el-checkbox>\n          </el-form-item>\n          <el-form-item v-if=\"data.departmentLst.length >0\" label=\"Thuộc phòng ban:\" prop=\"Value\">\n            <el-select v-model=\"ruleForm.Value\" filterable placeholder=\"--Chọn--\" :disabled=\"data.disabled\">\n              <el-option v-for=\"t in data.departmentLst\" :key=\"t.GroupId\" :label=\"t.GroupName\" :value=\"t.GroupId\"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"Quản lý:\" prop=\"Owner\">\n            <el-select v-model=\"ruleForm.Owner\" filterable clearable placeholder=\"--Chọn--\" :disabled=\"data.disabled\">\n              <el-option v-for=\"t in data.workers\" v-if=\"t.UserId.indexOf(';') == -1\" :key=\"t.UserId\" :label=\"t.Username\" :value=\"t.UserId\"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"Nhân sự thực hiện:\" prop=\"Assigned\">\n            <el-select v-model=\"ruleForm.Assigned\" filterable multiple placeholder=\"--Chọn--\" :disabled=\"data.disabled\">\n              <el-option v-for=\"t in data.workers\" :key=\"t.UserId\" :label=\"t.Username\" :value=\"t.UserId\"/>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"KPIs kế hoạch:\" prop=\"Plan\">\n            <el-input v-model=\"ruleForm.Plan\" @change=\"autoCal()\" :disabled=\"data.disabled\"/>\n          </el-form-item>\n          <el-form-item label=\"KPIs đạt:\" prop=\"Done\">\n            <el-input v-model=\"ruleForm.Done\" @change=\"autoCal()\" :disabled=\"data.disabled\"/>\n          </el-form-item>\n          <el-form-item label=\"Đơn vị tính:\" prop=\"Unit\">\n            <el-input v-model=\"ruleForm.Unit\" :disabled=\"data.disabled\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"Tính % Hoàn thành:\" prop=\"autoCal\">\n            <el-switch v-model=\"ruleForm.autoCal\" @change=\"autoCal()\" :disabled=\"data.disabled\"/>\n          </el-form-item>\n          <el-form-item label=\"Tỉ lệ hoành thành:\" prop=\"Progress\">\n            <el-input v-model=\"ruleForm.Progress\" :disabled=\"data.disabled\"/>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-card>\n    <HistoryGrid v-if=\"!data.isEditable\" :dtSource=viewHistoryModel :dtHeader=\"['Mục', 'Giá trị cũ', 'Giá trị mới']\" />\n  </div>\n</template>\n\n<script>\n  import HistoryGrid from '@/components/dynamic/HistoryGrid'\n  export default {\n    components: {\n      HistoryGrid\n    },\n    props:[\"data\"],\n    data() {\n      var user = JSON.parse(this.$getItemLocalStorage(this.$localStorageConstant.LoggedOnUser));\n      var isLeader= !this.$isMantisAdmin()\n        && !this.$isMantisAdmin()\n        && user.GroupRoles && user.GroupRoles.Leader && user.GroupRoles.Leader.indexOf(user.Project.GroupId)>-1;\n      var ruleForm = {};\n      if(this.data.item.Name !=undefined){\n        ruleForm = this.$Lodash.cloneDeep(this.data.item);\n        if(this.data.item.Assigned != undefined && !this.$Utils.equals(this.data.item.Assigned, '')){\n          ruleForm.Assigned = this.data.item.Assigned.split(';').filter(item=>{\n            return !this.$Utils.equals(item, '')\n          });\n        }else {\n          ruleForm.Assigned =[];\n        }\n        ruleForm.autoCal = false;\n        ruleForm.oldName = this.data.item.Name+\"\";\n        ruleForm.IsPublic=ruleForm.IsPublic==='0'?false: true;\n      }else{\n        ruleForm.Name='';\n        ruleForm.Value='';\n        ruleForm.TargetType='';\n        ruleForm.IsPublic=true;\n        ruleForm.ActualStartDate='';\n        ruleForm.ActualFinishDate='';\n        ruleForm.Assigned = [];\n        ruleForm.ParentId = '';\n        ruleForm.Owner = '';\n        ruleForm.Plan = '';\n        ruleForm.Done = '';\n        ruleForm.Unit = '';\n        ruleForm.Progress = 0;\n        ruleForm.autoCal = true;\n        ruleForm.oldName = \"\";\n      }\n      return {\n        isShowAllTarget: false,\n        oldObject: this.$Lodash.cloneDeep(ruleForm),\n        typeLst : [{\n          \"Id\": \"1\",\n          \"Name\": \"Mục tiêu công ty\"\n        }, {\n          \"Id\": \"2\",\n          \"Name\": \"Mục tiêu phòng ban\"\n        }, {\n          \"Id\": \"3\",\n          \"Name\": \"Mục tiêu cá nhân\"\n        }\n        ],\n        ruleForm: ruleForm,\n        isLeader: isLeader,\n        dataCopied: this.$Lodash.cloneDeep(this.data),\n        viewHistoryModel: [],\n        rules: {\n          Name: [\n            { required: true, message: 'Tên bắt buộc phải điền', trigger: 'blur' },\n          ],\n          Value: [\n            { required: true, message: 'Phòng ban bắt buộc phải chọn', trigger: 'change' }\n          ],\n          ParentId: [\n            { required: true, message: 'Mục tiêu cha bắt buộc phải chọn', trigger: 'change' }\n          ]\n        }\n      };\n    },\n    watch: {\n    },\n    methods: {\n      submitForm(formName) {\n        var ctrl = this;\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n            ctrl.checkExits();\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n      },\n      autoCal() {\n        if (this.ruleForm.autoCal == true) {\n          var tmp = Math.round(Number(this.ruleForm.Done) / Number(this.ruleForm.Plan) * 100);\n          this.ruleForm.Progress = isNaN(tmp)?this.ruleForm.Progress:tmp;\n        }\n      },\n      resetForm(formName) {\n        this.$refs[formName].resetFields();\n      },\n      close() {\n        this.$hub.$emit('close-modal');\n      },\n      deleteTarget() {\n        var ctrl = this;\n        this.$confirm('Mục tiêu sẽ bị xóa hoàn toàn. Tiếp tục?', 'Cảnh báo', {\n          confirmButtonText: 'Xóa',\n          cancelButtonText: 'Bỏ qua',\n          type: 'warning'\n        }).then(() => {\n          ctrl.recursiveDeleteTarget({\"Id\":ctrl.data.item.Id, \"Level\":ctrl.data.item.Level});\n          ctrl.close();\n          //update tasks\n          var tRequest = this.$Utils.clone(this.$singleRequest);\n          tRequest.R1_RequestTemplate = \"AG_Task_Task.Search\";\n          tRequest.R1_RequestDataGroup = \"DataGroup.danh-sach-cong-viec.04b66\";\n          tRequest.R1_RequestFields = \"Id;Targets;TargetsName;\";\n          for(var i=1; i <= eval(ctrl.data.item.Level - 5); i++){\n            tRequest.R1_RequestFields += 'TargetsLevel' + i + \";\";\n          }\n          tRequest['R1_TargetsLevel' + [ctrl.model.Level - 5]] = ctrl.model.Id;\n          ctrl.$Utils.post(tRequest).then(function(response) {\n            response = ctrl.$Utils.getDataWithRoot(response.R1, 'Data.TasksDS.Task');\n            var updateRequest = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n            $.each(response, function(index, value){\n              var fVal = {};\n              fVal.Id = ctrl.$Lodash.cloneDeep(value.Id)\n              fVal.Targets = \"\";\n              fVal.TargetsName = \"\";\n              fVal.RequestTemplate = \"AG_Task_Task.Update\";\n              fVal.RequestDataGroup = \"DataGroup.danh-sach-cong-viec.04b66\";\n              fVal.RequestFields = \"Id;Targets;TargetsName;\";\n              $.each(value.Targets.split(';'), function(key, val){\n                if(key < eval(ctrl.data.item.Level - 6)){\n                  fVal.Targets += val + \";\";\n                  fVal['TargetsLevel' + [key + 1]] = val;\n                  fVal.RequestFields += 'TargetsLevel' + [key + 1] + \";\";\n                }\n              })\n              $.each(value.TargetsName.split(';'), function(key, val){\n                if(key < eval(ctrl.data.item.Level - 6)){\n                  fVal.TargetsName += val + \";\";\n                }\n              })\n              updateRequest.TotalRequests = index + 1;\n              updateRequest = ctrl.$Utils.updateParamsSingleRequest(updateRequest, fVal, index + 1)\n            })\n            ctrl.$Utils.post(updateRequest);\n          })\n        }).catch(() => {\n\n        });\n      },\n      recursiveDeleteTarget(data) {\n        var ctrl = this;\n        if (ctrl.$Utils.isEmpty(data)) {\n          var request = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n          request.R1_RequestTemplate = \"Setting.Delete\";\n          request.R1_Id = data.Id;\n          ctrl.$Utils.post(request).then(function(dData) {\n            $.each(ctrl.data.targetLst, function(key,value) {\n              if (data.Id == value.ParentId) {\n                ctrl.recursiveDeleteTarget(value);\n              }\n            })\n            ctrl.data.getTargets();\n            ctrl.data.getObject();\n          })\n        };\n      },\n      loadHistory(id) {\n        var ctrl = this;\n        var request = {\n          RequestAction: 'Request',\n          RequestClass: 'xBase',\n          TotalRequests: '1',\n          R1_RequestTemplate: 'ChangedLogs',\n          R1_Code: 'ChangedHistory',\n          R1_SourceId: id\n        }\n\n        var arrShowField = [];\n        arrShowField= ctrl.data.targetFields.filter((field)=>{\n          return field.History == 'true'\n        });\n\n        ctrl.$Utils.post(request).then(function(result) {\n          if (result.success && result.R1.success) {\n            var logData = ctrl.$Utils.getDataWithRoot(result, 'R1.Data.DataDS.Logs');\n            /**\n             * tạo vòng lặp để lấy từng bản ghi\n             * Dùng JSON.parse để decode dữ liệu lưu trong lịch sử thay đổi\n             */\n            $.each(logData, function(k,log) {\n              try {\n                ctrl.viewHistoryModel.push({ type: 'head', value: log });\n                var logChanges = JSON.parse(log.Changes);\n                $.each(logChanges, function(k, change) {\n                  if (arrShowField.length > 0 && change.ColumnName !== 'Assigned' && change.ColumnName !== 'Id') {\n                    if (change.ColumnName === \"ActualStartDate\" || change.ColumnName === \"ActualFinishDate\" || change.ColumnName ===\"Created\") {\n                      var format = \"DD/MM/YYYY\";\n                      var date = ctrl.$Utils.stringToDate(change.OldDisplayValue);\n                      change.OldDisplayValue = log.Version === '1'?\"\":ctrl.$Utils.formatDateTime(date, format);\n                      date = ctrl.$Utils.stringToDate(change.NewDisplayValue);\n                      change.NewDisplayValue = ctrl.$Utils.formatDateTime(date, format);\n                    }\n                    if ((change.ColumnName === \"AssignedName\" && !change.OldDisplayValue && change.NewDisplayValue === \"\")==false) {\n                      arrShowField.forEach(function(field) {\n                        var object = { type: 'body', value: change };\n                        var checkField = field.DynamicText!=undefined && field.DynamicText!='' ? field.DynamicText : field.Name;\n                        if (change.ColumnName == checkField) {\n                          if (change.ColumnName === 'TargetType') {\n                            ctrl.typeLst.filter((item)=>{\n                              if(item.Id === change.OldDisplayValue)\n                                change.OldDisplayValue= log.Version === '1'?\"\":item.Name;\n                              if(item.Id === change.NewDisplayValue)\n                                change.NewDisplayValue= item.Name;\n                            });\n                          }else if (change.ColumnName === 'IsPublic') {\n                            change.OldDisplayValue=log.Version === '1'?\"\":(change.OldDisplayValue==='0'||change.OldDisplayValue==false?'Riêng tư':'Công khai');\n                            change.NewDisplayValue=change.NewDisplayValue==='0'||change.OldDisplayValue==false?'Riêng tư':'Công khai';\n                          }\n                          ctrl.viewHistoryModel.push(object);\n\n                        }\n                      })\n                    }\n                  }\n                })\n              } catch (ex) {\n                console.log(ex);\n              }\n            });\n          }\n        });\n      },\n      checkExits() {\n        var ctrl = this;\n        var request = ctrl.$Lodash.cloneDeep(this.$singleRequest);\n        request.R1_RequestTemplate = 'xDynamicData_Setting.Search';\n        request.R1_RequestFields = 'Name;ParentId;';\n        request.R1_Name = ctrl.ruleForm.Name;\n        request.R1_RequestDataGroup = 'DataGroup.muc-tieu.091fb';\n        request.R1_ParentId = ctrl.ruleForm.Parent ? ctrl.ruleForm.Parent.Id : ctrl.ruleForm.ParentId;\n        ctrl.$Utils.post(request).then(function (data) {\n          var listExitsTar = ctrl.$Utils.getDataWithRoot(data.R1, 'Data.DynamicDS.Setting');\n          listExitsTar = listExitsTar.filter(function (el) {\n            return el.Name != ctrl.ruleForm.oldName;\n          });\n          if (listExitsTar.length != 0) {\n            ctrl.$message.error('Tên mục tiêu đã có');\n          }\n          else {\n            ctrl.saveOrUpdate();\n          }\n        });\n      },\n      saveOrUpdate() {\n        var ctrl = this;\n\n        var request = ctrl.$Lodash.cloneDeep(this.$singleRequest);\n        if (!ctrl.ruleForm.Id) {\n          request.R1_RequestTemplate = 'xDynamicData_Setting.Insert';\n          request.R1_ReferenceId = ctrl.ruleForm.ParentId ? ctrl.ruleForm.ParentId : ctrl.data.rootId;\n          request.R1_NestedSetType = 'InsertLastChildNode';\n        }\n        else {\n          request.R1_RequestTemplate = 'xDynamicData_Setting.Update';\n          request.R1_Id = ctrl.ruleForm.Id;\n        }\n        request.R1_RequestFields = 'Plan;Done;Progress;Unit;Assigned;AssignedName;Owner;OwnerName;TargetType;Id;Index;Code;Name;Value;Description;LeftIndex;ParentId;Level;Value;RightIndex;Created;CreatedBy;Modified;IsPublic;ActualStartDate;ActualFinishDate;ValueName';\n        request.R1_RequestDataGroup= 'DataGroup.muc-tieu.091fb';\n        request.R1_Name = ctrl.ruleForm.Name;\n        request.R1_Plan = ctrl.ruleForm.Plan;\n        request.R1_Done = ctrl.ruleForm.Done;\n        request.R1_Owner = ctrl.ruleForm.Owner;\n        request.R1_TargetType = ctrl.ruleForm.TargetType;\n        if(!isNaN(parseFloat(ctrl.ruleForm.Progress+''))){\n          request.R1_Progress = ctrl.ruleForm.Progress;\n        }else{\n          delete ctrl.ruleForm.Progress;\n        }\n        request.R1_Unit = ctrl.ruleForm.Unit;\n        request.R1_IsPublic = ctrl.ruleForm.IsPublic == true?1:0;\n        request.R1_Value = ctrl.ruleForm.Value;\n        $.each(ctrl.departmentLst, (k, val)=>{\n          var res = val.GroupId !== ctrl.ruleForm.Value;\n          if(!res){\n            request.R1_ValueName = val.GroupName;\n          }\n          return res;\n        })\n\n        request.R1_Assigned = \"\";\n        request.R1_AssignedName = \"\";\n        $.each(ctrl.ruleForm.Assigned, function (k,Id) {\n          request.R1_Assigned += Id + \";\";\n          ctrl.data.workers.filter(function (user) {\n            if (user.UserId && user.UserId === Id) {\n              request.R1_AssignedName += user.Username + ',';\n            }\n          });\n        });\n        ctrl.data.workers.filter(function (user) {\n          if(user.UserId && user.UserId === ctrl.ruleForm.Owner){\n            request.R1_OwnerName = user.Username;\n          }\n        });\n        if(ctrl.$Utils.isEmpty(ctrl.ruleForm.ActualStartDate))\n          request.R1_ActualStartDate = ctrl.$Utils.formatDateTime(ctrl.ruleForm.ActualStartDate);\n        if(ctrl.$Utils.isEmpty(ctrl.ruleForm.ActualFinishDate))\n          request.R1_ActualFinishDate =  ctrl.$Utils.formatDateTime(ctrl.ruleForm.ActualFinishDate);\n        ctrl.$Utils.post(request).then(function (data) {\n          ctrl.objectReturn = ctrl.$Lodash.cloneDeep(ctrl.ruleForm);\n          ctrl.objectReturn.Id = data.R1.Data;\n          if (ctrl.$Utils.isEmpty(ctrl.objectReturn, 'autoCals'))\n            delete ctrl.objectReturn.autoCals;\n          if (ctrl.$Utils.isEmpty(ctrl.objectReturn, 'oldName'))\n            delete ctrl.objectReturn.oldName;\n          ctrl.data.item = ctrl.$Lodash.cloneDeep(ctrl.objectReturn);\n          ctrl.objectReturn.AssignedName = request.R1_AssignedName;\n          ctrl.objectReturn.OwnerName = request.R1_OwnerName;\n          ctrl.objectReturn.Assigned = request.R1_Assigned;\n          ctrl.objectReturn.Value = request.R1_Value;\n          var arrChanged = ctrl.compareChange(ctrl.objectReturn, ctrl.oldObject);\n          if (ctrl.$Utils.isEmpty(arrChanged) && arrChanged.length>0) {\n            if (request.R1_RequestTemplate, 'xDynamicData_Setting.Insert') {\n              ctrl.createHistoryLogs(arrChanged);\n            } else {\n              arrChanged = arrChanged.filter(function(ele) {\n                return ctrl.$Utils.isEmpty(ele.OldDisplayValue);\n              })\n              if (ctrl.$Utils.equals(arrChanged, []) == false) {\n                ctrl.createHistoryLogs(arrChanged);\n              }\n            }\n          }\n          var target = ctrl.$Lodash.cloneDeep(ctrl.ruleForm);\n          target.Id = data.R1.Data;\n          ctrl.saveOrUpdatePermissions(ctrl.ruleForm.oldName!==\"\", target);\n          ctrl.close();\n        });\n      },\n      compareChange(objReturn, objOld) {\n        var ctrl = this;\n        var arrChanged = [];\n        ctrl.objTemp = ctrl.$Lodash.cloneDeep(ctrl.oldObject);\n        $.each(objReturn, function(key, val) {\n          if (ctrl.$Utils.isEmpty(val)) {\n            var valueReturn = val;\n            var caption = \"\";\n            var field = {};\n            $.each(ctrl.data.targetFields, function(k, values) {\n              if (values.Name === key && values.History == \"true\") {\n                caption = values.Caption;\n                field = values;\n              }\n            });\n            var obj = {};\n\n            $.each(objOld, function(key1, value) {\n              if (key == key1 && ctrl.$Utils.equals(value, valueReturn) == false) {\n                obj[key1] = value;\n              }\n            });\n            var changedObject = {\n              ColumnCaption: caption,\n              ColumnName: key,\n              OldDisplayValue: obj[key],\n              OldValue: obj[key],\n              NewDisplayValue: objReturn[key] ? objReturn[key] : valueReturn,\n              NewValue: valueReturn\n            };\n            if (ctrl.$Utils.isEmpty(field)) {\n              switch (field.FieldColumnType) {\n                case 'DateTime':\n                  if (ctrl.$Utils.stringToDate(val).getTime() == ctrl.$Utils.stringToDate(changedObject.OldValue).getTime()) {\n                    changedObject = undefined;\n                  }\n                  break;\n                case 'Double':\n                  if (!ctrl.$Utils.isEmpty(ctrl.objTemp[key]) && ctrl.$Utils.isEmpty(objReturn[key])) {\n                    changedObject.OldDisplayValue = 0;\n                    changedObject.OldValue = 0;\n                  }\n                  break;\n                case 'Integer':\n                  if (!ctrl.$Utils.isEmpty(ctrl.objTemp[key]) && ctrl.$Utils.isEmpty(objReturn[key])) {\n                    changedObject.OldDisplayValue = 0;\n                    changedObject.OldValue = 0;\n                  }\n                  break;\n              }\n            }\n\n            if (changedObject && ctrl.$Utils.isEmpty(caption) && caption != \"\") {\n              arrChanged.push(changedObject);\n            }\n          }\n        });\n        return arrChanged;\n      },\n      createHistoryLogs(arrChanged) {\n        var ctrl = this;\n        var countHistory = ctrl.$Utils.updateParamsSingleRequest(ctrl.$Lodash.cloneDeep(ctrl.$singleRequest), {\n          RequestTemplate: 'ChangedLogs.Count',\n          SourceId: ctrl.objectReturn.Id,\n          Code: 'ChangedHistory'\n        });\n        // ctrl.$Utils.showLoading('start');\n        ctrl.$Utils.post(countHistory).then(function(result) {\n          if (ctrl.$Utils.isEmpty(result, 'R1.Data')) {\n            var insertRequest = ctrl.$Utils.updateParamsSingleRequest(countHistory, {\n              RequestTemplate: 'ChangedLogs.Insert',\n              Version: parseInt(result.R1.Data) + 1,\n              Changes: JSON.stringify(arrChanged),\n              CreatedByName: ctrl.$Utils.getUserInfo('Username')\n            });\n            ctrl.$Utils.post(insertRequest).then(function(insertResult) {\n              // ctrl.$Utils.showLoading('stop');\n            });\n          }\n        });\n      },\n      saveOrUpdatePermissions(isUpdate, target) {\n        var ctrl = this;\n        // ctrl.$Utils.showLoading('start');\n        var req = ctrl.$Lodash.cloneDeep(ctrl.$singleRequest);\n        if (isUpdate == true) {\n          var paramsSearchLinked = {\n            RequestAction: 'SearchLinked',\n            RequestClass: 'Addition',\n            ConditionFields: 'Parent;',\n            StaticFields: 'Code;Child;Parent;Name;Created;Description',\n            OrderFields: 'Created DESC',\n            Parent: target.Id\n          };\n          ctrl.$Utils.post(paramsSearchLinked).then(function(result) {\n            if (result.TotalCount > 0) {\n              var arrLink = result.TotalCount == 1 ? [result.Data.DataDS.Linked] : result.Data.DataDS.Linked;\n              var removeLinks = {\n                RequestClass: 'xBase',\n                RequestAction: 'Request',\n                TotalRequests: arrLink.length,\n                RequestTemplate: 'Permission.Remove'\n              };\n              $.each(arrLink, function(link, key) {\n                removeLinks['R' + (key + 1) + '_Id'] = link.Id;\n              });\n              ctrl.savePermission(target, removeLinks);\n            }\n          });\n        }else {\n          ctrl.savePermission(target);\n        }\n      },\n      savePermission(target, removeLinks) {\n        var ctrl = this;\n        if (target.IsPublic == true) {\n          ctrl.$Utils.linkToRoleEveryone([{\n            Id: target.Id\n            , Caption: target.Name\n          }]);\n          //ntn load target again\n          ctrl.data.getTargets();\n          ctrl.data.getObject();\n\n        }else{\n          var permissons = [];\n          var leaders = [];\n          var groups = [];\n          groups.push(target.Value);\n          if (groups && groups.length>0) {\n            var req = {};\n            groups.filter(function (gro, key) {\n              req['R' + ctrl.ix + '_RequestTemplate'] = 'OrgnizationList';\n              req['R' + ctrl.ix + '_GroupName'] = 'Leader';\n              req['R' + ctrl.ix + '_GroupParent'] = gro.GroupId;\n              req['R' + ctrl.ix + '_RequestDataType'] = 'json';\n              req['R' + ctrl.ix + '_GroupType'] = '2';\n              ctrl.ix++;\n            });\n            req.TotalRequests = ctrl.ix-1;\n            req.RequestClass = 'xBase';\n            req.RequestAction = 'Request';\n            ctrl.$Utils.post(req).then(function (data1) {\n              for (var k = 1; k < ctrl.ix; k++) {\n                var ele = ctrl.$Utils.getDataWithRoot(data1, 'R' + k + '.Data.UserDS.Group');\n                if (ele[0] !=undefined) {\n                  if ( ele[0].GroupName==='Leader') {\n                    leaders = leaders.concat(ele);\n                  }\n                }\n              }\n              var strLeaders = '';\n              leaders.filter(function (ele, key) {\n                if(ele.GroupParent == groups[0].GroupId){\n                  strLeaders += ele.GroupId + ';';\n                  if (target.TargetType == '2' || target.TargetType == '1') {\n                    var p = {\n                      Parrent: target.Id\n                      , Code: 'Edit'\n                      , Name: target.Name + ' - Edit'\n                      , Child: ele.GroupId\n                      , ChildTable: 'tblGroup'\n                    };\n                    permissons.push(p);\n                  }else if (target.TargetType == '3') {\n                    var p1 = {\n                      Parrent: target.Id\n                      , Code: 'Manage'\n                      , Name: target.Name + ' - Manage'\n                      , Child: ele.GroupId\n                      , ChildTable: 'tblGroup'\n                    }\n                    permissons.push(p1);\n                  }\n                }\n              });\n              if (target.Owner  && strLeaders.indexOf(target.Owner) ==-1) {\n                var p = {\n                  Parrent: target.Id\n                  , Code: 'Edit'\n                  , Name: target.Name + ' - Edit'\n                  , Child: target.Owner\n                  , ChildTable: 'tblUser'\n                }\n                permissons.push(p);\n              }\n              if (target.Assigned) {\n                target.Assigned.filter(function (user, key) {\n                  if (user !== '' && strLeaders.indexOf(user) ==-1) {\n                    var p = {\n                      Parrent: target.Id\n                      , Code: 'Edit'\n                      , Name: target.Name + ' - Edit'\n                      , Child: user\n                      , ChildTable: 'tblUser'\n                    }\n                    permissons.push(p);\n                  }\n                });\n              }\n              //\n              //\n              var p10 = {\n                Parrent: target.Id\n                , Code: 'Manage'\n                , Name: target.Name + ' - Manage'\n                , Child: ctrl.$administrator\n                , ChildTable: 'tblGroup'\n              }\n              permissons.push(p10);\n              var p11 = {\n                Parrent: target.Id\n                , Code: 'Manage'\n                , Name: target.Name + ' - Manage'\n                , Child: ctrl.$supervisor\n                , ChildTable: 'tblGroup'\n              }\n              permissons.push(p11);\n              //\n              //\n              var persReadyToInsert = {};\n              var index = 1;\n              permissons.filter(function (p,k) {\n                persReadyToInsert['R' + index + '_RequestClass'] = 'xBase';\n                persReadyToInsert['R' + index + '_RequestAction'] = 'LinkUserToObject';\n                persReadyToInsert['R' + index + '_ParentTable'] = 'xObject';\n                persReadyToInsert['R' + index + '_RequestTemplate'] = 'Permission.Insert';\n                persReadyToInsert['R' + index + '_Parent'] = p.Parrent;\n                persReadyToInsert['R' + index + '_Child'] = p.Child;\n                persReadyToInsert['R' + index + '_Code'] = p.Code;\n                persReadyToInsert['R' + index + '_Name'] = p.Name;\n                persReadyToInsert['R' + index + '_ChildTable'] = p.ChildTable;\n                index++;\n              });\n              persReadyToInsert.TotalRequests = permissons.length;\n              persReadyToInsert.RequestClass = 'xBase';\n              persReadyToInsert.RequestAction = 'Request';\n              if(removeLinks == undefined){\n                ctrl.$Utils.post(persReadyToInsert).then(function (data3) {\n                  // ntn load target again\n                  ctrl.data.getObject();\n                  ctrl.data.getTargets();\n                });\n              }else{\n                ctrl.$Utils.post(removeLinks).then(function (data2) {\n                  ctrl.$Utils.post(persReadyToInsert).then(function (data3) {\n                    // ntn load target again\n                    ctrl.data.getTargets();\n                    ctrl.data.getObject();\n                  });\n                });\n\n              }\n            });\n          }\n        }\n      },\n      changeEditState(){\n        this.data.disabled =!this.data.disabled;\n      },\n      changeType(type) {\n        this.dataCopied.targetLst = this.data.targetLst.filter(function(ele) {\n          return ele!=undefined && ((eval(type) -1)  + \"\" === ele.TargetType);\n        });\n        this.$set(this.dataCopied, 'targetFullLst', this.data.targetSavedLst.filter(function(ele) {\n          return ele!=undefined && ((eval(type) -1)  + \"\" === ele.TargetType);\n        }));\n      },\n      setParent(parent) {\n        var ctrl = this;\n        if (ctrl.ruleForm.TargetType ==3) {\n          // ctrl.model.Value = '';\n          $.each(ctrl.departmentLst, function (k, group) {\n            if (ctrl.$Utils.isEmpty(parent) && group.GroupId == parent) {\n              ctrl.ruleForm.Value= group;\n            }\n          })\n        }\n      }\n    },\n    created() {\n      var ctrl = this;\n      if(ctrl.ruleForm.Id){\n        ctrl.loadHistory(ctrl.ruleForm.Id);\n        ctrl.changeType(ctrl.ruleForm.TargetType);\n        if(ctrl.ruleForm.IsPublic ==undefined){\n          ctrl.ruleForm.IsPublic = true;\n        }\n        $.each(ctrl.data.targetLst,(k, v)=>{\n          if(ctrl.ruleForm.Id === v.Id){\n            ctrl.ruleForm.Permission = v.Permission;\n            return false;\n          }\n        });\n      }else {\n        ctrl.ruleForm.Permission = 'Edit';\n        if(ctrl.isLeader){\n          ctrl.ruleForm.TargetType = ctrl.typeLst[2].Id;\n          ctrl.changeType(ctrl.typeLst[2].Id);\n        }else{\n          ctrl.ruleForm.TargetType = ctrl.typeLst[0].Id;\n          ctrl.changeType(ctrl.typeLst[0].Id);\n        }\n        ctrl.ruleForm.IsPublic = true;\n      }\n      var user = JSON.parse(ctrl.$getItemLocalStorage(ctrl.$localStorageConstant.LoggedOnUser));\n      if (user.LoginName !== 'superadmin') {\n        ctrl.data.workers = ctrl.data.workers.filter((el)=> {\n          return (el.LoginName && el.LoginName.indexOf('superadmin') === -1);\n        });\n      }\n\n    }\n  }\n</script>\n<style lang=\"scss\" scoped>\n  @media only screen and (max-width: 768px) {\n    /* For mobile phones: */\n    .el-input, .el-select, .el-radio {\n      width: 100%;\n    }\n    .el-radio {\n      margin-left: 0px !important;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/static/TargetDialog.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-73377d6a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HistoryGrid.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./HistoryGrid.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-73377d6a\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./HistoryGrid.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/dynamic/HistoryGrid.vue\n// module id = 934\n// module chunks = 2 8","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true,\\\"alias\\\":{\\\"../img\\\":\\\"../static/img\\\"}}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-73377d6a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./HistoryGrid.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"dd1e798e\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-73377d6a\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/dynamic/HistoryGrid.vue\n// module id = 935\n// module chunks = 2 8","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"#history-grid th{text-align:center!important}#history-grid td,#history-grid th,#history-grid tr{border:thin solid #d3d3d3}\", \"\", {\"version\":3,\"sources\":[\"D:/projects/bos/vuejs/src/components/dynamic/HistoryGrid.vue\"],\"names\":[],\"mappings\":\"AACA,iBACE,2BAA8B,CAE/B,AACD,mDAFE,yBAA6B,CAI9B\",\"file\":\"HistoryGrid.vue\",\"sourcesContent\":[\"\\n#history-grid th {\\n  text-align: center !important;\\n  border: solid thin lightgray;\\n}\\n#history-grid tr, #history-grid td {\\n  border: solid thin lightgray;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"minimize\":true,\"sourceMap\":true,\"alias\":{\"../img\":\"../static/img\"}}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-73377d6a\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/dynamic/HistoryGrid.vue\n// module id = 936\n// module chunks = 2 8","<template>\n  <el-card id=\"history-grid\" class=\"box-card\">\n    <div slot=\"header\" class=\"clearfix\">\n      <span>Lịch sử</span>\n    </div>\n    <div class=\"el-table__body-wrapper is-scroll-left\">\n      <table style=\"width: 100%\">\n        <thead class=\"positive-bg light text-bold\">\n        <tr>\n          <th v-for=\"h in dtHeader\">{{h}}</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr v-for=\"itemLog in dtSource\" :style=\"{'background-color': itemLog.type=='body'? '#e4e5e6' : '#fff'}\">\n          <td v-if=\"itemLog.type=='head'\" class=\"success\" colspan=\"3\">\n            v.{{itemLog.value.Version + '.0 '}}<strong>{{itemLog.value.CreatedByName}}</strong>, {{$Utils.formatDateTime(itemLog.value.Created,'DD-MM-YYYY HH:mm')}}\n          </td>\n          <td v-if=\"itemLog.type =='body'\" >{{itemLog.value.ColumnCaption}}</td>\n          <td v-if=\"itemLog.type =='body'\">{{itemLog.value.OldDisplayValue}}</td>\n          <td v-if=\"itemLog.type =='body'\">{{itemLog.value.NewDisplayValue}}</td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n  </el-card>\n</template>\n<script>\n  export default {\n    props: [\"dtSource\",\"dtHeader\"],\n    methods: {\n    },\n    data() {\n      return {\n      };\n    }\n  }\n</script>\n<style lang=\"scss\">\n  #history-grid {\n    th {\n      text-align: center !important;\n      border: solid thin lightgray;\n    }\n    tr, td {\n      border : solid thin lightgray;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/dynamic/HistoryGrid.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{staticClass:\"box-card\",attrs:{\"id\":\"history-grid\"}},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"Lịch sử\")])]),_vm._v(\" \"),_c('div',{staticClass:\"el-table__body-wrapper is-scroll-left\"},[_c('table',{staticStyle:{\"width\":\"100%\"}},[_c('thead',{staticClass:\"positive-bg light text-bold\"},[_c('tr',_vm._l((_vm.dtHeader),function(h){return _c('th',[_vm._v(_vm._s(h))])}))]),_vm._v(\" \"),_c('tbody',_vm._l((_vm.dtSource),function(itemLog){return _c('tr',{style:({'background-color': itemLog.type=='body'? '#e4e5e6' : '#fff'})},[(itemLog.type=='head')?_c('td',{staticClass:\"success\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"\\n          v.\"+_vm._s(itemLog.value.Version + '.0 ')),_c('strong',[_vm._v(_vm._s(itemLog.value.CreatedByName))]),_vm._v(\", \"+_vm._s(_vm.$Utils.formatDateTime(itemLog.value.Created,'DD-MM-YYYY HH:mm'))+\"\\n        \")]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.ColumnCaption))]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.OldDisplayValue))]):_vm._e(),_vm._v(\" \"),(itemLog.type =='body')?_c('td',[_vm._v(_vm._s(itemLog.value.NewDisplayValue))]):_vm._e()])}))])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-73377d6a\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/dynamic/HistoryGrid.vue\n// module id = 938\n// module chunks = 2 8","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(\"Thông tin mục tiêu\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"}},[(_vm.data.disabled==false && _vm.ruleForm.Permission && _vm.ruleForm.Permission !=='View' )?_c('el-button',{attrs:{\"icon\":\"fa fa-save\"},on:{\"click\":function($event){_vm.submitForm('ruleForm')}}}):_vm._e(),_vm._v(\" \"),(_vm.data.disabled==true && _vm.ruleForm.Permission && _vm.ruleForm.Permission !=='View' )?_c('el-button',{attrs:{\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.changeEditState}}):_vm._e(),_vm._v(\" \"),(_vm.data.isEditable==true && _vm.data.item.Permission ==undefined )?_c('el-button',{attrs:{\"icon\":\"fa fa-eraser\"},on:{\"click\":function($event){_vm.resetForm('ruleForm')}}}):_vm._e(),_vm._v(\" \"),(_vm.ruleForm.Permission && _vm.ruleForm.Permission ==='Manage')?_c('el-button',{attrs:{\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){_vm.deleteTarget()}}}):_vm._e()],1)]),_vm._v(\" \"),_c('div',[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules,\"label-position\":_vm.$isMobileDevice?'top':'right',\"label-width\":\"150px\"}},[_c('el-form-item',{attrs:{\"label\":\"Tên:\",\"prop\":\"Name\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Name\", $$v)},expression:\"ruleForm.Name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Hiển thị:\",\"prop\":\"IsPublic\"}},[_c('el-switch',{staticStyle:{\"display\":\"block\"},attrs:{\"disabled\":_vm.data.disabled,\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\",\"active-text\":\"Công khai\",\"inactive-text\":\"Riêng tư\"},model:{value:(_vm.ruleForm.IsPublic),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"IsPublic\", $$v)},expression:\"ruleForm.IsPublic\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"demo-form-inline\",attrs:{\"label\":\"Thời gian:\",\"prop\":\"startEndDate\"}},[_c('el-date-picker',{attrs:{\"format\":\"dd-MM-yyyy\",\"disabled\":_vm.data.disabled,\"type\":\"date\",\"placeholder\":\"Bắt đầu\"},model:{value:(_vm.ruleForm.ActualStartDate),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ActualStartDate\", $$v)},expression:\"ruleForm.ActualStartDate\"}}),_vm._v(\" \"),_c('el-date-picker',{attrs:{\"format\":\"dd-MM-yyyy\",\"disabled\":_vm.data.disabled,\"type\":\"date\",\"placeholder\":\"Kết thúc\"},model:{value:(_vm.ruleForm.ActualFinishDate),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ActualFinishDate\", $$v)},expression:\"ruleForm.ActualFinishDate\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Loại mục tiêu:\",\"prop\":\"TargetType\"}},[_c('el-radio-group',{attrs:{\"disabled\":!_vm.data.isEditable},on:{\"change\":function($event){_vm.changeType(_vm.ruleForm.TargetType)}},model:{value:(_vm.ruleForm.TargetType),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"TargetType\", $$v)},expression:\"ruleForm.TargetType\"}},_vm._l((_vm.typeLst),function(t){return _c('el-radio',{key:t.Id,attrs:{\"size\":\"mini\",\"label\":t.Id,\"border\":\"\",\"ng-show\":\"data.disabled?true:(t.Id ===ruleForm.TargetType) \"}},[_vm._v(_vm._s(t.Name))])}))],1),_vm._v(\" \"),(_vm.dataCopied.targetLst.length !=undefined && _vm.ruleForm.TargetType!=='1' )?_c('el-form-item',{attrs:{\"label\":\"Mục tiêu cha:\",\"prop\":\"ParentId\"}},[(_vm.isShowAllTarget)?_c('el-select',{attrs:{\"placeholder\":\"--Chọn--\",\"disabled\":_vm.ruleForm.Id!==undefined},on:{\"change\":function($event){_vm.setParent(_vm.ruleForm.ParentId)}},model:{value:(_vm.ruleForm.ParentId),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ParentId\", $$v)},expression:\"ruleForm.ParentId\"}},_vm._l((_vm.dataCopied.targetFullLst),function(t){return _c('el-option',{key:t.Id,attrs:{\"label\":t.Name,\"value\":t.Id}})})):_c('el-select',{attrs:{\"placeholder\":\"--Chọn--\",\"disabled\":!_vm.data.isEditable},on:{\"change\":function($event){_vm.setParent(_vm.ruleForm.ParentId)}},model:{value:(_vm.ruleForm.ParentId),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"ParentId\", $$v)},expression:\"ruleForm.ParentId\"}},_vm._l((_vm.dataCopied.targetLst),function(t){return _c('el-option',{key:t.Id,attrs:{\"label\":t.Name,\"value\":t.Id}})})),_vm._v(\"\\n             \\n          \"),(_vm.ruleForm.Id===undefined)?_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"Bộ lọc thời gian sẽ ảnh hưởng tới số lượng mục tiêu cha hiển thị. Để hiển thị tất cả mục tiêu, hãy chọn 'Hiển thị tất cả'\",\"placement\":\"top\"}},[_c('i',{staticClass:\"fa fa-lg fa-info-circle\"})]):_vm._e(),_vm._v(\"\\n             \\n          \"),(_vm.ruleForm.Id===undefined)?_c('el-checkbox',{attrs:{\"label\":\"Hiển thị tất cả\"},model:{value:(_vm.isShowAllTarget),callback:function ($$v) {_vm.isShowAllTarget=$$v},expression:\"isShowAllTarget\"}}):_vm._e()],1):_vm._e(),_vm._v(\" \"),(_vm.data.departmentLst.length >0)?_c('el-form-item',{attrs:{\"label\":\"Thuộc phòng ban:\",\"prop\":\"Value\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Value),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Value\", $$v)},expression:\"ruleForm.Value\"}},_vm._l((_vm.data.departmentLst),function(t){return _c('el-option',{key:t.GroupId,attrs:{\"label\":t.GroupName,\"value\":t.GroupId}})}))],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Quản lý:\",\"prop\":\"Owner\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Owner),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Owner\", $$v)},expression:\"ruleForm.Owner\"}},_vm._l((_vm.data.workers),function(t){return (t.UserId.indexOf(';') == -1)?_c('el-option',{key:t.UserId,attrs:{\"label\":t.Username,\"value\":t.UserId}}):_vm._e()}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Nhân sự thực hiện:\",\"prop\":\"Assigned\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"multiple\":\"\",\"placeholder\":\"--Chọn--\",\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Assigned),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Assigned\", $$v)},expression:\"ruleForm.Assigned\"}},_vm._l((_vm.data.workers),function(t){return _c('el-option',{key:t.UserId,attrs:{\"label\":t.Username,\"value\":t.UserId}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"KPIs kế hoạch:\",\"prop\":\"Plan\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.Plan),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Plan\", $$v)},expression:\"ruleForm.Plan\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"KPIs đạt:\",\"prop\":\"Done\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.Done),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Done\", $$v)},expression:\"ruleForm.Done\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Đơn vị tính:\",\"prop\":\"Unit\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Unit),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Unit\", $$v)},expression:\"ruleForm.Unit\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Tính % Hoàn thành:\",\"prop\":\"autoCal\"}},[_c('el-switch',{attrs:{\"disabled\":_vm.data.disabled},on:{\"change\":function($event){_vm.autoCal()}},model:{value:(_vm.ruleForm.autoCal),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"autoCal\", $$v)},expression:\"ruleForm.autoCal\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Tỉ lệ hoành thành:\",\"prop\":\"Progress\"}},[_c('el-input',{attrs:{\"disabled\":_vm.data.disabled},model:{value:(_vm.ruleForm.Progress),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"Progress\", $$v)},expression:\"ruleForm.Progress\"}})],1)],1)],1)]),_vm._v(\" \"),(!_vm.data.isEditable)?_c('HistoryGrid',{attrs:{\"dtSource\":_vm.viewHistoryModel,\"dtHeader\":['Mục', 'Giá trị cũ', 'Giá trị mới']}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4ccba1ba\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/static/TargetDialog.vue\n// module id = 939\n// module chunks = 2 8","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"tTbl\"}},[_c('div',{staticStyle:{\"flex\":\"1\",\"display\":\"flex\",\"align-items\":\"center\",\"justify-content\":\"space-between\",\"font-size\":\"14px\",\"padding-right\":\"8px\"}},[_c('el-row'),_vm._v(\" \"),(_vm.editableUser)?_c('el-tooltip',{attrs:{\"content\":\"Thêm mới mục tiêu\",\"placement\":\"top\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"fa fa-plus\"},on:{\"click\":function($event){_vm.addNewTarget()}}})],1):_vm._e()],1),_vm._v(\" \"),_c('el-table',{attrs:{\"data\":_vm.dtSrc,\"border\":\"\",\"empty-text\":\"Không có dữ liệu\"}},[_c('el-table-column',{attrs:{\"label\":\"\",\"width\":\"50px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticStyle:{\"text-align\":\"center\",\"cursor\":\"pointer\"},on:{\"click\":function($event){_vm.openTargetDetail(scope.row)}}},[_c('i',{staticClass:\"fa-lg icon-magnifier-add\"})])]}}])}),_vm._v(\" \"),_c('el-table-tree-column',{attrs:{\"prop\":\"Name\",\"label\":\"Tên\",\"levelKey\":\"level\",\"treeKey\":\"Id\",\"parentKey\":\"ParentId\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Progress\",\"label\":\"Hoàn thành\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-progress',{attrs:{\"text-inside\":true,\"stroke-width\":18,\"percentage\":Math.round(isNaN(scope.row.Progress)?0:scope.row.Progress)}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"TargetType\",\"label\":\"Loại\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(_vm.targetsObj[scope.row.TargetType]?_vm.targetsObj[scope.row.TargetType].Name:'---')+\"\\n      \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Plan\",\"label\":\"Kế hoạch\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Done\",\"label\":\"Đạt được\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Unit\",\"label\":\"Đơn vị\",\"show-overflow-tooltip\":true}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"Unit\",\"label\":\"Người quản lý\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[(_vm.userWithAvatarLst[scope.row.Owner]!=undefined)?_c('img',{staticClass:\"avatar\",staticStyle:{\"margin\":\"8px 10px 0 0\"},attrs:{\"height\":\"35\",\"width\":\"35\",\"title\":_vm.userWithAvatarLst[scope.row.Owner].Username,\"src\":_vm.loadAvatar(_vm.userWithAvatarLst[scope.row.Owner].Avatar)}}):_vm._e(),_vm._v(\" \"),(_vm.userWithAvatarLst[scope.row.Owner]==undefined)?_c('span',[_vm._v(_vm._s(scope.row.OwnerName))]):_vm._e()])]}}])})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4695fe4e\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/static/TargetSetting.vue\n// module id = 940\n// module chunks = 2 8"],"sourceRoot":""}